{"version":3,"sources":["op-native/react-native-bootsplash.ts","op-native/react-native-immersive.ts","op-utils/delay.ts","op-utils/hapticFeedback.ts","op-utils/pickPuzzle.ts","op-utils/scale.ts","op-native/react-native-sound.ts","op-utils/sound.ts","op-utils/storage.ts","op-utils/useAnimation.ts","op-utils/useOnMount.ts","op-utils/useHardwareBackButton.ts","op-config/constants.ts","op-design/animations.ts","op-design/colors.ts","op-design/fonts.ts","op-design/metrics.ts","op-splash/Splash.tsx","op-board/store.ts","op-common/AnimatedLetter.tsx","op-common/Text.tsx","op-common/Button.tsx","op-common/BottomNav.tsx","op-common/Header.tsx","op-board/Tile.tsx","op-common/Score.tsx","op-board/PointerAwareView.tsx","op-board/Board.tsx","op-home/Logo.tsx","op-home/Menu.tsx","op-home/Home.tsx","op-native/react-native-keep-awake.ts","op-game/Game.tsx","op-intro/Intro.tsx","op-tutorial/Description.tsx","op-tutorial/Tutorial.tsx","op-message/Message.tsx","op-success/Success.tsx","op-stats/Stats.tsx","op-finish/Finish.tsx","op-core/store.ts","op-core/Router.tsx","op-core/smarkets-logo.svg","op-core/Layout.tsx","op-core/Main.tsx","op-core/App.tsx","serviceWorkerRegistration.ts","index.ts"],"names":["mock","hide","Immersive","delay","ms","Promise","res","setTimeout","hapticFeedback","generate","Platform","OS","ReactNativeHaptic","contains","arr","el","indexOf","pickRandomPuzzle","allPuzzlesLength","playedHistory","completedHistory","recentlyPlayedFactor","Math","floor","length","lastPlayedPuzzle","last","nextPuzzle","undefined","recentPuzzles","takeRight","randomPuzzle","random","difference","scale","size","GUIDELINE_BASE_WIDTH","pixelDensity","PixelRatio","get","adjustedWidth","Dimensions","width","adjustedHeight","height","isTablet","scaleTextToFit","text","weight","split","map","char","reduce","a","b","MockWebSound","c","MAIN_BUNDLE","soundEffects","buttonPress","path","sound","volume","select","ios","android","ReactNativeSound","setCategory","preloadSound","id","soundEffect","resolve","reject","error","console","initializeAudio","soundEffectIds","Object","keys","all","playSound","play","setVolume","success","rehydrateObject","key","AsyncStorage","getItem","serializedItem","item","JSON","parse","persistObject","value","stringify","setItem","useAnimation","initialValue","endValue","animationValueRef","useRef","Animated","Value","setup","config","timing","current","toValue","useNativeDriver","easing","Easing","inOut","quad","useOnMount","onMount","useEffect","useHardwareBackButton","onBackButtonPress","backHandlerRef","BackHandler","addEventListener","remove","createInterpolationRanges","from","to","interpolateStart","inputRange","outputRange","fade","animValue","opacity","interpolate","slideValue","slide","transform","translateY","animations","splashColor","lightColors","Array","fill","color","index","tinycolor","brighten","toString","colors","useColors","useColorScheme","primary","splash","fonts","regular","fontFamily","semibold","bold","secondary","fontWeight","metrics","topMargin","screenMargin","webMaxLayoutWidth","webBoardMaxLayoutWidth","Splash","onHide","document","getElementById","style","display","sortInt","Cell","root","row","col","line","this","makeObservable","observable","computed","completed","valid","filled","orientation","hovered","highlighted","setLine","action","cell","onSameRowOf","onSameColumnOf","origin","equals","edgeCols","edges","sort","leftEdgeCol","rightEdgeCol","edgeRows","topEdgeRow","bottomEdgeRow","interactions","hoveredCell","draggedLine","Line","committedCells","array","pendingCells","stale","currentHandler","replace","leftCommittedCells","rightCommittedCells","topCommittedCells","bottomCommittedCells","pendingCellsDirection","draggedDirection","cells","unlinkReference","linkReference","stalify","replacePendingCells","commit","reset","forEach","filter","slice","clear","Error","cellsByCols","sortBy","cellsByRows","Number","onLeftOf","onRightOf","onTopOf","onBottomOf","intersectionBy","dir1","dir2","concat","BoardStore","rootStore","puzzleId","grid","lines","initialize","destroy","isInitialized","rowsCount","colsCount","cleared","fillLine","rows","rowString","push","cellsInBetween","shouldDrop","colStart","colEnd","at","takeWhile","takeRightWhile","rowStart","rowEnd","find","some","InteractionsStore","gridLayout","numberOfMoves","enableInteraction","disableInteractions","isDragging","onCellTouch","onCellEnter","onCellLeave","onCellTouchEnd","onGridTouchExit","autorun","board","layoutChangeEvent","nativeEvent","layout","coords","x","y","cellWidth","cellHeight","isOutsideGrid","findCell","isEdge","isOrigin","isTap","storesContext","createContext","useBoardStores","useContext","AnimatedLetter","charAnimatedStyle","Text","children","family","font","styles","StyleSheet","create","defaultButtonTextSize","Button","label","textFamily","textColor","textSize","textWeight","addAnimation","otherProps","TouchableOpacity","touchable","onPressIn","labelHighlighted","fontSize","toLowerCase","flexDirection","BottomNav","View","marginTop","marginBottom","justifyContent","bottomNavHeight","observer","fadeAnimValue","name","prefix","textStyle","identifier","textIdentifier","zIndex","logo","alignSelf","headerHeight","adjustBorderForOrientation","position","content","alignItems","score","star","borderRightWidth","borderLeftWidth","borderBottomWidth","borderTopWidth","Tile","props","successAnimValue","borderWidth","calculateBorderWidth","tileStyle","borderColor","backgroundColor","contentStyle","top","left","right","bottom","calculateFontSize","paddingRight","paddingBottom","userSelect","hoverStyle","symbol","pointerEvents","selectable","hover","textAlign","getEventCoordinates","event","locationX","locationY","touch","targetTouches","changedTouches","targetViewCoords","target","getBoundingClientRect","preventDefault","clientX","clientY","layerX","layerY","PointerAwareView","onPointerDown","onPointerMove","onPointerUp","pointerEnabled","cursorStyle","native","default","cursor","onTouchStart","e","onTouchMove","onTouchEnd","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","isAndroid","Board","availableHorizontalSpace","availableVerticalSpace","onClearedAnimEnd","onClearedAnimStart","puzzle","useCoreStores","fadeAnim","successAnim","animateSuccess","sequence","duration","start","data","disposeHapticReaction","reaction","disposeClearedReaction","didSucceed","tileSize","androidOpacityStyle","onGridPointerDown","onGridPointerMove","onGridPointerUp","onLayout","cellsRow","rowIndex","androidOpacity","Logo","titleAnimValue","dotAnimValue","title1","title2","charShowAnimDuration","dotAnimStyle","titleRow","titleRow2","Menu","disabled","items","starStyle","button","onPress","starred","Home","router","stats","maxOpacity","animateInSequence","hasLoadedHomeOnce","useState","isMenuDisabled","setIsMenuDisabled","titleAnim","menuAnim","dotAnim","rootFadeAnim","canContinue","handleItemPress","changeRoute","menuItems","unshift","flex","paddingVertical","paddingHorizontal","about","Fragment","Game","interactionsDisabledRef","windowDimensions","useWindowDimensions","screenWidth","clamp","screenHeight","navigateToHome","navigateToSuccess","mode","fadeInterfaceAnim","fadeRootAnim","boardWrapper","onPuzzleCompleted","marginHorizontal","asyncAnimationStart","anim","Intro","skippingEnabledRef","hasSkippedRef","handleComplete","showAnim","hideAnim","animate","fitFontSize","digitList","letterList","chars","digit","type","letter","TouchableWithoutFeedback","Description","title","message","Tutorial","isUnmountingRef","descriptionLayout","setDescriptionLayout","tutorialTitle","tutorialMessage","Message","fadeTitleAnim","fadeMessageAnim","fadeBottomAnim","stagger","parallel","updateCompletedPuzzles","margin","Success","startNewGame","fadeInterfaceInAnimDuration","fadeSubtilteAnim","fadeBottomNavAnim","fadeScoreAnim","fadeRootOut","middle","textCompleted","textScoreValue","completedWrapper","Stats","progress","completedPuzzles","Finish","href","link","textOr","sum","RouterStore","currentRoute","routesHistory","route","puzzleMode","setNextPuzzle","setPuzzle","PuzzleStore","increasesScore","isTutorialEnd","setRandomPuzzle","updatePlayedPuzzles","randomPuzzleIndex","puzzles","playedPuzzles","nextMode","tutorial","small","medium","large","emptyPuzzleHistory","StatsStore","initialized","initializeStore","tutorialCompleted","runInAction","uniq","toJS","Router","Layout","img","src","maxWidth","Main","isShowingSplash","setIsShowingSplash","SafeAreaView","configure","enforceActions","on","setImmersive","addImmersiveListener","UIManager","setLayoutAnimationEnabledExperimental","App","initializeApp","RNBootSplash","Boolean","window","location","hostname","match","AppRegistry","registerComponent","ready","then","f","runApplication","rootTag","navigator","serviceWorker","registration","unregister","catch"],"mappings":"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","file":"static/js/main.babc43b7.chunk.js","sourcesContent":["const mock = {\n  hide: () => {},\n};\n\nexport default mock;\n","export const Immersive: any = {};\n","export const delay = (ms: number) => new Promise((res) => setTimeout(res, ms));\n","import ReactNativeHaptic from \"react-native-haptic\";\nimport { Platform } from \"react-native\";\n\nexport const hapticFeedback = {\n  generate:\n    Platform.OS === \"ios\" ? ReactNativeHaptic.generate : () => undefined,\n};\n","import last from \"lodash/last\";\nimport difference from \"lodash/difference\";\nimport takeRight from \"lodash/takeRight\";\n\ninterface Params {\n  allPuzzlesLength: number;\n  playedHistory?: number[];\n  recentlyPlayedFactor?: number;\n  completedHistory?: number[];\n}\n\nconst contains = <T>(arr: T[], el: T) => arr.indexOf(el) > -1;\n\nexport const pickRandomPuzzle = ({\n  allPuzzlesLength,\n  playedHistory = [],\n  completedHistory = [],\n  recentlyPlayedFactor = Math.floor(allPuzzlesLength / 2),\n}: Params) => {\n  const hasPlayedAllPuzzles = playedHistory.length >= allPuzzlesLength;\n  // If there's at least a puzzle that has not been played yet, pick one from\n  // the next one from the not-played puzzle list\n  if (!hasPlayedAllPuzzles) {\n    const lastPlayedPuzzle = last(playedHistory);\n    const nextPuzzle =\n      lastPlayedPuzzle === undefined ? 0 : lastPlayedPuzzle + 1;\n    // Should always be true... but it's better to be safe than sorry\n    if (!contains(playedHistory, nextPuzzle)) return nextPuzzle;\n  }\n  const hasCompletedAllPuzzles =\n    completedHistory.length >= allPuzzlesLength &&\n    completedHistory.length >= playedHistory.length;\n  // If all the puzzles for this mode have already been completed, pick a random\n  // one, making sure it wasn't played recently\n  if (hasCompletedAllPuzzles) {\n    const recentPuzzles = takeRight(playedHistory, recentlyPlayedFactor);\n    const pickRandomPuzzle = (): number => {\n      const randomPuzzle = Math.floor(Math.random() * allPuzzlesLength);\n      const isRecent = contains(recentPuzzles, randomPuzzle);\n      return !isRecent ? randomPuzzle : pickRandomPuzzle();\n    };\n    return pickRandomPuzzle();\n  }\n  // If there's at least a puzzle that has not been completed yet, pick it from\n  // the list\n  return difference(playedHistory, completedHistory)[0];\n};\n","import { PixelRatio, Dimensions, Platform } from \"react-native\";\n\nconst isTablet = () => {\n  let pixelDensity = PixelRatio.get();\n  const adjustedWidth = Dimensions.get(\"screen\").width * pixelDensity;\n  const adjustedHeight = Dimensions.get(\"screen\").height * pixelDensity;\n  if (pixelDensity < 2 && (adjustedWidth >= 1000 || adjustedHeight >= 1000)) {\n    return true;\n  } else\n    return (\n      pixelDensity === 2 && (adjustedWidth >= 1920 || adjustedHeight >= 1920)\n    );\n};\n\nexport const scale = (size: number) => {\n  if (Platform.OS === \"android\" || Platform.OS === \"ios\") {\n    const GUIDELINE_BASE_WIDTH = isTablet() ? 520 : 350;\n    return (Dimensions.get(\"window\").width / GUIDELINE_BASE_WIDTH) * size;\n  }\n  return size;\n};\n\nexport const scaleTextToFit = (text: string) => {\n  const weight = text\n    .split(\"\")\n    .map((char) => {\n      if ([\"i\", \"l\", \"j\", \"f\", \"r\", \"t\"].indexOf(char) >= 0) {\n        return 0.7;\n      } else if ([\"m\", \"w\"].indexOf(char) >= 0) {\n        return 2;\n      } else {\n        return 1;\n      }\n    })\n    .reduce((a, b) => a + b, 0);\n  if (weight <= 12) {\n    return scale(48);\n  } else {\n    return scale(48 - (weight - 12) * 2.5);\n  }\n};\n","export default class MockWebSound {\n  constructor(a: any, b: any, c: (a: any) => void) {} // eslint-disable-line\n  static setCategory(a: string, b: boolean) {}\n  static MAIN_BUNDLE = \"\";\n}\n","import ReactNativeSound from \"op-native/react-native-sound\";\nimport { Platform } from \"react-native\";\n\ntype SoundEffectId = keyof typeof soundEffects;\n\nconst soundEffects = {\n  buttonPress: {\n    path: \"buttonpress.wav\",\n    sound: null as any,\n    volume: Platform.select({ ios: 0.4, android: 0.5 }),\n  },\n};\n\n// Makes sure we can play audio effects without breaking other backgound app's\n// playback\nReactNativeSound.setCategory(\"Ambient\", true);\n\nconst preloadSound = async (id: SoundEffectId) => {\n  if (Platform.OS === \"android\") return;\n  const soundEffect = soundEffects[id];\n  return new Promise((resolve, reject) => {\n    const sound: any = new ReactNativeSound(\n      soundEffect.path,\n      ReactNativeSound.MAIN_BUNDLE,\n      (error) => {\n        if (error) {\n          console.error(`Failed to preload ${soundEffect.path}`, error);\n          return reject(error);\n        } else {\n          soundEffect.sound = sound;\n          resolve(sound);\n        }\n      }\n    );\n  });\n};\n\nexport const initializeAudio = async () => {\n  if (Platform.OS === \"android\") return;\n  // Preload sound effects\n  try {\n    const soundEffectIds = Object.keys(soundEffects) as SoundEffectId[];\n    Promise.all(soundEffectIds.map((id) => preloadSound(id)));\n  } catch (error) {\n    console.error(\"Failed to preload sound\", error);\n  }\n};\n\nexport const playSound = async (id: SoundEffectId) => {\n  if (Platform.OS === \"android\") return;\n  const soundEffect = soundEffects[id];\n  return new Promise((resolve, reject) => {\n    if (soundEffect.sound && soundEffect.sound.play) {\n      soundEffect.sound\n        .setVolume(soundEffect.volume)\n        .play((success: boolean) =>\n          success\n            ? resolve()\n            : reject(\"Playback failed due to audio decoding errors\")\n        );\n    }\n  });\n};\n","import AsyncStorage from \"@react-native-community/async-storage\";\n\nconst storageItemKeys = [\"completedPuzzles\", \"playedPuzzles\"] as const;\n\ntype ElementType<T extends ReadonlyArray<unknown>> = T extends ReadonlyArray<\n  infer ElementType\n>\n  ? ElementType\n  : never;\n\ntype StorageItemKey = ElementType<typeof storageItemKeys>;\n\nexport const clearStorage = async () => {\n  await Promise.all(storageItemKeys.map((key) => AsyncStorage.removeItem(key)));\n};\n\nexport const rehydrateObject = async (key: StorageItemKey) => {\n  const serializedItem = await AsyncStorage.getItem(key);\n  const item = serializedItem ? JSON.parse(serializedItem) : undefined;\n  return item;\n};\n\nexport const persistObject = async (key: StorageItemKey, value: Object) => {\n  const serializedItem = JSON.stringify(value);\n  await AsyncStorage.setItem(key, serializedItem);\n};\n","import { useRef } from \"react\";\nimport { Animated, Easing } from \"react-native\";\n\nexport const useAnimation = function (initialValue: number = 0) {\n  const endValue = initialValue === 0 ? 1 : 0;\n  const animationValueRef = useRef(new Animated.Value(initialValue));\n\n  const setup = (config: Partial<Animated.TimingAnimationConfig> = {}) =>\n    Animated.timing(animationValueRef.current, {\n      toValue: endValue,\n      useNativeDriver: true,\n      easing: Easing.inOut(Easing.quad),\n      ...config,\n    });\n\n  return {\n    value: animationValueRef.current,\n    setup: setup,\n  };\n};\n","import { useEffect } from \"react\";\n\ntype EffectCallback = () => void | (() => void);\n\nexport function useOnMount(onMount: EffectCallback) {\n  // TODO: re-think this\n  useEffect(onMount, []); // eslint-disable-line\n}\n","import { useRef } from \"react\";\nimport { NativeEventSubscription, BackHandler } from \"react-native\";\nimport { useOnMount } from \"./useOnMount\";\n\nexport function useHardwareBackButton(onBackButtonPress: () => void) {\n  const backHandlerRef = useRef<NativeEventSubscription>();\n  useOnMount(() => {\n    backHandlerRef.current = BackHandler.addEventListener(\n      \"hardwareBackPress\",\n      () => {\n        onBackButtonPress();\n        return true;\n      }\n    );\n    return () => {\n      if (backHandlerRef.current) {\n        backHandlerRef.current.remove();\n      }\n    };\n  });\n}\n","// Turn \"simulateProduction\" on to simulate a production environment\nconst simulateProduction = false;\n\n// Enable MobX logging (trough the mobx-logger lib)\nconst _enableMobxLogging = true;\n\n// Don't show the splash screen\nconst _skipSplashScreen = false;\n\n// Clean the local-storage\nconst _simulateFirstLoad = false;\n\n// Auto-solve the puzzle after 2000 ms\nconst _autoSolve = false;\n\n// Use the Averta font?\nconst _useAvertaFont = true;\n\n// To be safe, let's make sure we don't user development settings in production\nconst isDevelopment = __DEV__ && !simulateProduction;\nexport const enableMobxLogging = isDevelopment && _enableMobxLogging;\nexport const skipSplashScreen = isDevelopment && _skipSplashScreen;\nexport const simulateFirstLoad = isDevelopment && _simulateFirstLoad;\nexport const autoSolve = isDevelopment && _autoSolve;\nexport const useAvertaFont = !isDevelopment || _useAvertaFont;\n","import { Animated } from \"react-native\";\nimport { scale } from \"op-utils\";\n\ninterface Config {\n  interpolateStart?: number;\n}\n\nconst createInterpolationRanges = (\n  from: number,\n  to: number,\n  config?: Config\n) => {\n  if (config && config.interpolateStart) {\n    return {\n      inputRange: [0, config.interpolateStart, 1],\n      outputRange: [from, from, to],\n    };\n  }\n  return {\n    inputRange: [0, 1],\n    outputRange: [from, to],\n  };\n};\n\nconst fade = (animValue: Animated.Value, config: Config = {}) => ({\n  opacity: animValue.interpolate(createInterpolationRanges(0, 1, config)),\n});\n\nconst slideValue = scale(20);\n\nconst slide = (\n  animValue: Animated.Value,\n  from: \"top\" | \"bottom\",\n  config: Config = {}\n) => ({\n  transform: [\n    {\n      translateY: animValue.interpolate(\n        createInterpolationRanges(\n          from === \"top\" ? -slideValue : +slideValue,\n          1,\n          config\n        )\n      ),\n    },\n  ],\n});\n\nconst fadeSlideTop = (animValue: Animated.Value, config: Config = {}) => ({\n  ...fade(animValue, config),\n  ...slide(animValue, \"top\", config),\n});\n\nconst fadeSlideBottom = (animValue: Animated.Value, config: Config = {}) => ({\n  ...fade(animValue, config),\n  ...slide(animValue, \"bottom\", config),\n});\n\nexport const animations = {\n  fade,\n  slide,\n  fadeSlideBottom,\n  fadeSlideTop,\n};\n","import { Appearance, useColorScheme } from \"react-native\";\nimport tinycolor from \"tinycolor2\";\n\nconst primaryColor = \"#171520\";\n// const splashColor = \"#84818D\";\nconst splashColor = \"#000000\";\n\nconst palette = new Array(10).fill(primaryColor).map((color, index) =>\n  tinycolor(color)\n    .brighten(index * 10)\n    .toString()\n);\n// const lightColors = palette;\n// const darkColors = palette.slice().reverse();\n\nconst lightColors = [\n  \"#171520\", // 0:\n  \"#FFFFFF\", // 1: // active cell border color\n  \"#4a4853\", // 2:\n  \"#00B073\", // 3: tile success background\n  \"#7d7b86\", // 4:\n  \"#5A5A5A\", // 5:\n  \"#b0aeb9\", // 6:\n  \"#979797\", // 7: tile border\n  \"#e3e1ec\", // 8:\n  \"#1b1b1b\", // 9: background color\n];\n\nexport const colors = {\n  primary: lightColors,\n  splash: splashColor,\n};\n\nexport const useColors = function () {\n  const colorScheme = useColorScheme();\n  return {\n    primary: lightColors,\n    splash: splashColor,\n  };\n};\n","import { Platform } from \"react-native\";\nimport { useAvertaFont } from \"op-config\";\n\n// Font used across the entire app (menu, title, messages, buttons).\n// In production it's the \"Averta\" font.\n// I'm not distributing the Averta font on GitHub.\n// If you want to contribute, you can toggle off the \"useAvertaFont\" config\n// variable.\nconst primaryFont = {\n  regular: {\n    fontFamily: \"Source-Sans-Regular\",\n  },\n  semibold: {\n    fontFamily: \"Source-Sans-Bold\",\n  },\n  bold: {\n    fontFamily: \"Source-Sans-Bold\",\n  },\n};\n\n// Font used for numbers (just for semibold).\n// It's the open-source \"Inter\" font on Android, \"San-Francisco\" on iOS.\nconst secondaryFont = {\n  semibold: {\n    fontFamily: Platform.OS === \"android\" ? \"Inter-SemiBold\" : undefined,\n    fontWeight: \"600\",\n  },\n  bold: {},\n  regular: {},\n};\n\nexport const fonts = {\n  primary: primaryFont,\n  secondary: secondaryFont,\n};\n","import { scale } from \"op-utils\";\n\nexport const metrics = {\n  topMargin: scale(48),\n  screenMargin: scale(16),\n  webMaxLayoutWidth: 1024,\n  webBoardMaxLayoutWidth: 800,\n};\n","import { FC } from \"react\";\nimport { useOnMount } from \"op-utils\";\n\ninterface SplashProps {\n  onHide: () => void;\n}\n\nexport const Splash: FC<SplashProps> = function ({ onHide }) {\n  // @ts-ignore\n  document.getElementById(\"splash\").style.display = \"none\";\n\n  useOnMount(() => {\n    onHide();\n  });\n\n  return null;\n};\n","import { LayoutRectangle, LayoutChangeEvent } from \"react-native\";\nimport { createContext, useContext } from \"react\";\nimport { observable, action, computed, autorun, makeObservable } from \"mobx\";\nimport { takeWhile, takeRightWhile, sortBy, intersectionBy } from \"lodash\";\n\nconst isOppositeDirectionOf = (dir1: string, dir2: string) => {\n  return (\n    (dir1 === \"right\" && dir2 === \"left\") ||\n    (dir1 === \"left\" && dir2 === \"right\") ||\n    (dir1 === \"top\" && dir2 === \"bottom\") ||\n    (dir1 === \"bottom\" && dir2 === \"top\")\n  );\n};\n\nconst sortInt = (a: number, b: number) => a - b;\n\nexport class Cell {\n  root: RootStore;\n\n  row: number;\n  col: number;\n  value: string;\n\n  line?: Line = undefined;\n\n  constructor(root: RootStore, row: number, col: number, value: string) {\n    this.root = root;\n    this.row = row;\n    this.col = col;\n    this.value = value;\n\n    makeObservable(this, {\n      line: observable,\n      id: computed,\n      completed: computed,\n      valid: computed,\n      filled: computed,\n      orientation: computed,\n      hovered: computed,\n      highlighted: computed,\n      setLine: action,\n    });\n  }\n\n  get id() {\n    return `${this.row}:${this.col}`;\n  }\n\n  get completed() {\n    if (!this.line) return false;\n    return this.line.completed;\n  }\n\n  get valid() {\n    if (!this.line) return false;\n    return this.line.valid;\n  }\n\n  get filled() {\n    return !!this.line;\n  }\n\n  get orientation() {\n    if (!this.line) return \"none\";\n    if (this.line.orientation === \"initial\") {\n      return this.line.origin.equals(this) ? \"single\" : \"none\";\n    } else if (this.line.orientation === \"horizontal\") {\n      const edgeCols = [this.line.edges[0].col, this.line.edges[1].col].sort(\n        sortInt\n      );\n      const [leftEdgeCol, rightEdgeCol] = edgeCols;\n      if (leftEdgeCol === this.col) {\n        return \"horizontal-left\";\n      } else if (rightEdgeCol === this.col) {\n        return \"horizontal-right\";\n      } else {\n        return \"horizontal-middle\";\n      }\n    } else if (this.line.orientation === \"vertical\") {\n      const edgeRows = [this.line.edges[0].row, this.line.edges[1].row].sort(\n        sortInt\n      );\n      const [topEdgeRow, bottomEdgeRow] = edgeRows;\n      if (topEdgeRow === this.row) {\n        return \"vertical-top\";\n      } else if (bottomEdgeRow === this.row) {\n        return \"vertical-bottom\";\n      } else {\n        return \"vertical-middle\";\n      }\n    }\n    return undefined;\n  }\n\n  get hovered() {\n    return this.equals(this.root.interactions.hoveredCell);\n  }\n\n  get highlighted() {\n    return (\n      this.hovered && this.line?.equals(this.root.interactions.draggedLine)\n    );\n  }\n\n  equals(cell?: Cell | null) {\n    return cell ? this.id === cell.id : false;\n  }\n\n  onSameRowOf(cell: Cell) {\n    return this.row === cell.row;\n  }\n\n  onSameColumnOf(cell: Cell) {\n    return this.col === cell.col;\n  }\n\n  onLeftOf(cell: Cell) {\n    return this.onSameRowOf(cell) && this.col <= cell.col;\n  }\n\n  onRightOf(cell: Cell) {\n    return this.onSameRowOf(cell) && this.col >= cell.col;\n  }\n\n  onTopOf(cell: Cell) {\n    return this.onSameColumnOf(cell) && this.row <= cell.row;\n  }\n\n  onBottomOf(cell: Cell) {\n    return this.onSameColumnOf(cell) && this.row >= cell.row;\n  }\n\n  horizontallyAdjacentTo(cell: Cell) {\n    return this.col + 1 === cell.col || this.col - 1 === cell.col;\n  }\n\n  verticallyAdjacentTo(cell: Cell) {\n    return this.row + 1 === cell.row || this.row - 1 === cell.row;\n  }\n\n  setLine(line?: Line) {\n    this.line = line;\n  }\n}\n\nclass Line {\n  origin: Cell;\n  committedCells = observable.array<Cell>([]);\n  pendingCells = observable.array<Cell>([]);\n  stale: boolean;\n  currentHandler: Cell | null;\n\n  constructor(origin: Cell) {\n    this.origin = origin;\n    this.committedCells.replace([origin]);\n    this.pendingCells.replace([]);\n    this.stale = false;\n    this.currentHandler = null;\n\n    makeObservable(this, {\n      origin: observable,\n      committedCells: observable,\n      pendingCells: observable,\n      stale: observable,\n      currentHandler: observable,\n      id: computed,\n      orientation: computed,\n      edges: computed,\n      valid: computed,\n      completed: computed,\n      leftCommittedCells: computed,\n      rightCommittedCells: computed,\n      topCommittedCells: computed,\n      bottomCommittedCells: computed,\n      pendingCellsDirection: computed,\n      draggedDirection: computed,\n      cells: computed,\n      unlinkReference: action,\n      linkReference: action,\n      stalify: action,\n      replacePendingCells: action,\n      commit: action,\n      reset: action,\n    });\n  }\n\n  get id() {\n    return this.origin.id;\n  }\n\n  get orientation() {\n    if (!this.cells.length) {\n      throw new Error(\"Line.orientation » Lines with no cells set\");\n    } else if (this.cells.length === 1) {\n      return \"initial\";\n    } else if (this.cells[0].onSameRowOf(this.cells[1])) {\n      return \"horizontal\";\n    } else {\n      return \"vertical\";\n    }\n  }\n\n  get edges() {\n    if (this.orientation === \"initial\") {\n      return [this.cells[0], this.cells[0]];\n    } else if (this.orientation === \"horizontal\") {\n      const cellsByCols = sortBy(this.cells.slice(), (cell) => cell.col);\n      return [cellsByCols[0], cellsByCols[cellsByCols.length - 1]];\n    } else {\n      const cellsByRows = sortBy(this.cells.slice(), (cell) => cell.row);\n      return [cellsByRows[0], cellsByRows[cellsByRows.length - 1]];\n    }\n  }\n\n  get valid() {\n    return Number(this.origin.value) >= this.cells.length;\n  }\n\n  get completed() {\n    return Number(this.origin.value) === this.cells.length;\n  }\n\n  get leftCommittedCells() {\n    return this.committedCells.filter((cell) => cell.onLeftOf(this.origin));\n  }\n\n  get rightCommittedCells() {\n    return this.committedCells.filter((cell) => cell.onRightOf(this.origin));\n  }\n\n  get topCommittedCells() {\n    return this.committedCells.filter((cell) => cell.onTopOf(this.origin));\n  }\n\n  get bottomCommittedCells() {\n    return this.committedCells.filter((cell) => cell.onBottomOf(this.origin));\n  }\n\n  get pendingCellsDirection() {\n    if (this.pendingCells.length) {\n      if (this.pendingCells[0].onSameRowOf(this.origin)) {\n        return this.pendingCells[0].col > this.origin.col ? \"right\" : \"left\";\n      }\n      if (this.pendingCells[0].onSameColumnOf(this.origin)) {\n        return this.pendingCells[0].row > this.origin.row ? \"bottom\" : \"top\";\n      }\n    }\n    return \"none\";\n  }\n\n  get draggedDirection() {\n    if (!this.currentHandler) return \"none\";\n    if (this.currentHandler.equals(this.origin)) return \"origin\";\n    if (this.currentHandler) {\n      if (this.currentHandler.onSameRowOf(this.origin)) {\n        return this.currentHandler.col > this.origin.col ? \"right\" : \"left\";\n      }\n      if (this.currentHandler.onSameColumnOf(this.origin)) {\n        return this.currentHandler.row > this.origin.row ? \"bottom\" : \"top\";\n      }\n    }\n    return \"none\";\n  }\n\n  get cells() {\n    if (this.origin.equals(this.currentHandler)) {\n      if (\n        !this.pendingCells.length ||\n        intersectionBy(this.pendingCells, this.committedCells, \"id\").length\n      ) {\n        return this.committedCells;\n      }\n    }\n    const isOpp = isOppositeDirectionOf(\n      this.draggedDirection,\n      this.pendingCellsDirection\n    );\n    if (isOpp) {\n      if (this.draggedDirection === \"left\") {\n        return this.rightCommittedCells;\n      } else if (this.draggedDirection === \"right\") {\n        return this.leftCommittedCells;\n      } else if (this.draggedDirection === \"top\") {\n        return this.bottomCommittedCells;\n      } else if (this.draggedDirection === \"bottom\") {\n        return this.topCommittedCells;\n      }\n    }\n    if (this.pendingCellsDirection === \"left\") {\n      return this.rightCommittedCells.concat(this.pendingCells);\n    } else if (this.pendingCellsDirection === \"right\") {\n      return this.leftCommittedCells.concat(this.pendingCells);\n    } else if (this.pendingCellsDirection === \"top\") {\n      return this.bottomCommittedCells.concat(this.pendingCells);\n    } else if (this.pendingCellsDirection === \"bottom\") {\n      return this.topCommittedCells.concat(this.pendingCells);\n    }\n    if (this.stale) {\n      if (this.draggedDirection === \"left\") {\n        return this.rightCommittedCells;\n      } else if (this.draggedDirection === \"right\") {\n        return this.leftCommittedCells;\n      } else if (this.draggedDirection === \"top\") {\n        return this.bottomCommittedCells;\n      } else if (this.draggedDirection === \"bottom\") {\n        return this.topCommittedCells;\n      }\n      return this.pendingCells.concat([this.origin]);\n    }\n    return this.committedCells;\n  }\n\n  unlinkReference() {\n    this.cells.forEach((cell) => cell.setLine(undefined));\n  }\n\n  linkReference() {\n    this.cells.forEach((cell) => cell.setLine(this));\n  }\n\n  stalify(currentHandler: Cell) {\n    this.currentHandler = currentHandler;\n  }\n\n  replacePendingCells(cells: Cell[]) {\n    this.unlinkReference();\n    if (!this.stale) {\n      this.stale = true;\n    }\n    this.pendingCells.replace(\n      cells.filter((cell) => !cell.equals(this.origin))\n    );\n    this.linkReference();\n  }\n\n  commit() {\n    this.committedCells.replace(this.cells.slice());\n    this.pendingCells.clear();\n    this.stale = false;\n  }\n\n  reset() {\n    this.unlinkReference();\n    this.committedCells.replace([this.origin]);\n    this.pendingCells.clear();\n    this.linkReference();\n  }\n\n  isEdge(cell: Cell) {\n    return this.edges[0].equals(cell) || this.edges[1].equals(cell);\n  }\n\n  equals(line?: Line) {\n    return line && this.id === line.id;\n  }\n}\n\nclass BoardStore {\n  root: RootStore;\n\n  puzzleId?: string = undefined;\n  grid = observable<Cell[]>([]);\n  lines = observable<Line>([]);\n\n  constructor(rootStore: RootStore) {\n    this.root = rootStore;\n\n    makeObservable(this, {\n      puzzleId: observable,\n      grid: observable,\n      lines: observable,\n      initialize: action,\n      reset: action,\n      destroy: action,\n      isInitialized: computed,\n      rowsCount: computed,\n      colsCount: computed,\n      cleared: computed,\n      fillLine: action,\n    });\n  }\n\n  initialize(puzzleId: string, rows: string[]) {\n    const grid: Cell[][] = [];\n    const lines: Line[] = [];\n    rows.forEach((rowString: string, row: number) => {\n      grid.push([]);\n      rowString.split(\"\").forEach((value: string, col: number) => {\n        const cell = new Cell(this.root, row, col, value);\n        if (Number(value) > 0 && Number(value) <= 9) {\n          const line = new Line(cell);\n          lines.push(line);\n          cell.setLine(line);\n        }\n        grid[row].push(cell);\n      });\n    });\n    this.grid.replace(grid);\n    this.lines.replace(lines);\n    this.puzzleId = puzzleId;\n  }\n\n  reset() {\n    this.lines.forEach((line) => {\n      line.reset();\n    });\n  }\n\n  destroy() {\n    this.puzzleId = undefined;\n    this.grid.replace([]);\n    this.lines.replace([]);\n  }\n\n  get isInitialized() {\n    return !!this.grid.length;\n  }\n\n  get rowsCount() {\n    return this.grid.length;\n  }\n\n  get colsCount() {\n    return this.grid?.[0]?.length;\n  }\n\n  get cleared() {\n    if (this.lines.find((line) => !line.completed)) {\n      return false;\n    }\n    const hasEmptyDot = this.grid.some((row) => {\n      return row.some((cell) => {\n        if (cell.value === \".\") {\n          return !cell.valid || !cell.completed;\n        }\n        return false;\n      });\n    });\n    if (hasEmptyDot) {\n      return false;\n    }\n    return true;\n  }\n\n  fillLine(line: Line, from: Cell, to: Cell) {\n    let cellsInBetween: Cell[] = [];\n    const shouldDrop = (cell: Cell) => {\n      return !cell.line || line.equals(cell.line);\n    };\n    if (from.onSameRowOf(to)) {\n      const row = from.row;\n      const [colStart, colEnd] = [from, to]\n        .map((cell) => cell.col)\n        .sort(sortInt);\n      for (let col = colStart; col <= colEnd; col++) {\n        cellsInBetween.push(this.at(row, col));\n      }\n      cellsInBetween =\n        from.col < to.col\n          ? takeWhile(cellsInBetween, shouldDrop)\n          : takeRightWhile(cellsInBetween, shouldDrop);\n    } else if (from.onSameColumnOf(to)) {\n      const col = from.col;\n      const [rowStart, rowEnd] = [from, to]\n        .map((cell) => cell.row)\n        .sort(sortInt);\n      for (let row = rowStart; row <= rowEnd; row++) {\n        cellsInBetween.push(this.at(row, col));\n      }\n      cellsInBetween =\n        from.row < to.row\n          ? takeWhile(cellsInBetween, shouldDrop)\n          : takeRightWhile(cellsInBetween, shouldDrop);\n    }\n    line.replacePendingCells(cellsInBetween);\n  }\n\n  cellsBetween(line: Line, from: Cell, to: Cell) {\n    const shouldDrop = (cell: Cell) => {\n      return !cell.line || line.equals(cell.line);\n    };\n    if (from.onSameRowOf(to)) {\n      const row = from.row;\n      const [colStart, colEnd] = [from, to]\n        .map((cell) => cell.col)\n        .sort(sortInt);\n      const cellsInBetween = [];\n      for (let col = colStart; col <= colEnd; col++) {\n        cellsInBetween.push(this.at(row, col));\n      }\n      return from.col < to.col\n        ? takeWhile(cellsInBetween, shouldDrop)\n        : takeRightWhile(cellsInBetween, shouldDrop);\n    } else if (from.onSameColumnOf(to)) {\n      const col = from.col;\n      const [rowStart, rowEnd] = [from, to]\n        .map((cell) => cell.row)\n        .sort(sortInt);\n      const cellsInBetween = [];\n      for (let row = rowStart; row <= rowEnd; row++) {\n        cellsInBetween.push(this.at(row, col));\n      }\n      return from.row < to.row\n        ? takeWhile(cellsInBetween, shouldDrop)\n        : takeRightWhile(cellsInBetween, shouldDrop);\n    }\n    return [];\n  }\n\n  at(row: number, col: number) {\n    return this.grid[row][col];\n  }\n\n  atId(id: string) {\n    const [row, col] = id.split(\":\");\n    return this.at(Number(row), Number(col));\n  }\n}\n\nclass InteractionsStore {\n  root: RootStore;\n\n  gridLayout?: LayoutRectangle = undefined;\n  currentHandler?: Cell = undefined;\n  draggedLine?: Line = undefined;\n  hoveredCell?: Cell = undefined;\n  numberOfMoves: number = 0;\n\n  constructor(rootStore: RootStore) {\n    makeObservable(this, {\n      currentHandler: observable,\n      draggedLine: observable,\n      hoveredCell: observable,\n      numberOfMoves: observable,\n      enableInteraction: action,\n      disableInteractions: action,\n      isDragging: computed,\n      onCellTouch: action,\n      onCellEnter: action,\n      onCellLeave: action,\n      onCellTouchEnd: action,\n      onGridTouchExit: action,\n    });\n\n    this.root = rootStore;\n    autorun(() => {\n      if (this.root.board.cleared) {\n        this.disableInteractions();\n      }\n    });\n  }\n\n  enableInteraction(layoutChangeEvent: LayoutChangeEvent) {\n    this.gridLayout = layoutChangeEvent.nativeEvent.layout;\n\n    this.currentHandler = undefined;\n    this.draggedLine = undefined;\n    this.hoveredCell = undefined;\n    this.numberOfMoves = 0;\n  }\n\n  disableInteractions() {\n    this.gridLayout = undefined;\n    this.currentHandler = undefined;\n    this.draggedLine = undefined;\n    this.hoveredCell = undefined;\n    this.numberOfMoves = 0;\n  }\n\n  get isDragging() {\n    return !!this.currentHandler;\n  }\n\n  /* ===================\n   * REACT NATIVE EVENTS\n   * =================== */\n  findCell(coords: [number, number]) {\n    const [x, y] = coords;\n    if (!this.gridLayout) return;\n    const cellWidth = this.gridLayout.width / this.root.board.colsCount;\n    const cellHeight = this.gridLayout.height / this.root.board.rowsCount;\n    const row = Math.floor(y / cellHeight);\n    const col = Math.floor(x / cellWidth);\n    const cell = this.root.board.at(row, col);\n    return cell;\n  }\n\n  isOutsideGrid(coords: [number, number]) {\n    const [x, y] = coords;\n    if (!this.gridLayout) return true;\n    return (\n      y <= 0 ||\n      y >= this.gridLayout.height ||\n      x <= 0 ||\n      x >= this.gridLayout.width\n    );\n  }\n\n  onGridPointerDown(coords: [number, number]) {\n    if (this.isOutsideGrid(coords)) {\n      this.onGridTouchExit();\n      return;\n    }\n    const cell = this.findCell(coords);\n    if (!cell) return;\n    this.onCellTouch(cell);\n  }\n\n  onGridPointerMove(coords: [number, number]) {\n    if (!this.isDragging) return;\n    if (this.isOutsideGrid(coords)) {\n      this.onGridTouchExit();\n      return;\n    }\n    const cell = this.findCell(coords);\n    if (!cell) return;\n    const isNewCell = !cell.equals(this.hoveredCell);\n    if (isNewCell) {\n      if (this.hoveredCell) {\n        this.onCellLeave(this.hoveredCell);\n      }\n      this.onCellEnter(cell);\n    }\n  }\n\n  onGridPointerUp(coords: [number, number]) {\n    if (!this.isDragging) return;\n    if (this.isOutsideGrid(coords)) {\n      this.onGridTouchExit();\n      return;\n    }\n    const cell = this.findCell(coords);\n    if (!cell) return;\n    this.onCellTouchEnd(cell);\n  }\n\n  /* ===================\n   * COMMON HANDLERS\n   * =================== */\n  onCellTouch(cell: Cell) {\n    const line = cell.line;\n    if (!line) return;\n    const isValidHandler = cell.equals(line.origin) || line.isEdge(cell);\n    if (isValidHandler) {\n      this.currentHandler = cell;\n      this.draggedLine = line;\n      this.hoveredCell = cell;\n    }\n    line.stalify(cell);\n  }\n\n  onCellEnter(cell: Cell) {\n    if (!this.currentHandler || !this.draggedLine) return;\n    this.numberOfMoves++;\n    if (\n      !this.draggedLine.origin.onSameColumnOf(cell) &&\n      !this.draggedLine.origin.onSameRowOf(cell)\n    )\n      return;\n    this.hoveredCell = cell;\n\n    this.root.board.fillLine(this.draggedLine, this.draggedLine.origin, cell);\n  }\n\n  onCellLeave(cell: Cell) {\n    if (!this.currentHandler || !this.draggedLine) return;\n    if (\n      cell.equals(this.currentHandler) &&\n      cell.equals(this.draggedLine.origin) &&\n      !this.draggedLine.isEdge(cell)\n    ) {\n      this.draggedLine.reset();\n    }\n  }\n\n  onCellTouchEnd(cell: Cell) {\n    if (!this.currentHandler || !this.draggedLine) return;\n    const isOrigin = cell.equals(this.draggedLine.origin);\n    const isTap =\n      this.numberOfMoves < 1 &&\n      this.currentHandler.equals(this.draggedLine.origin);\n    if (isOrigin && isTap) {\n      this.draggedLine.reset();\n    }\n    if (this.draggedLine) {\n      this.draggedLine.commit();\n    }\n    this.currentHandler = undefined;\n    this.draggedLine = undefined;\n    this.hoveredCell = undefined;\n    this.numberOfMoves = 0;\n  }\n\n  onGridTouchExit() {\n    if (this.draggedLine) {\n      this.draggedLine.commit();\n    }\n    this.currentHandler = undefined;\n    this.draggedLine = undefined;\n    this.hoveredCell = undefined;\n    this.numberOfMoves = 0;\n  }\n}\n\nclass RootStore {\n  board: BoardStore;\n  interactions: InteractionsStore;\n\n  constructor() {\n    this.board = new BoardStore(this);\n    this.interactions = new InteractionsStore(this);\n  }\n}\n\nexport const rootStore = new RootStore();\n\nexport const storesContext = createContext({\n  board: rootStore.board,\n  interactions: rootStore.interactions,\n});\n\nexport const useBoardStores = () => useContext(storesContext);\n","import React, { FC } from \"react\";\nimport { Animated } from \"react-native\";\nimport { Text, TextProps } from \"op-common\";\nimport { animations } from \"op-design\";\n\ninterface AnimatedLetterProps extends TextProps {\n  animValue: Animated.Value;\n  delay: number;\n  value: string;\n  secondary?: boolean;\n}\n\nexport const AnimatedLetter: FC<AnimatedLetterProps> = function ({\n  animValue,\n  delay,\n  style,\n  value,\n  secondary,\n}) {\n  const charAnimatedStyle = animations.fadeSlideBottom(animValue, {\n    interpolateStart: delay,\n  });\n  return (\n    <Text\n      weight=\"bold\"\n      secondary={secondary}\n      style={[style, charAnimatedStyle]}\n    >\n      {value}\n    </Text>\n  );\n};\n","import React, { FC } from \"react\";\nimport { TextProps as RNTextProps, StyleSheet, Animated } from \"react-native\";\nimport { fonts, useColors } from \"op-design\";\n\nexport type TextFamily = keyof typeof fonts;\n\nexport type TextWeight = keyof typeof fonts.primary;\n\nexport interface TextProps extends RNTextProps {\n  family?: TextFamily;\n  weight?: TextWeight;\n  secondary?: boolean;\n  style?: any; // Because on the missing \"Animated\" typings for the style\n}\n\nexport const Text: FC<TextProps> = function ({\n  children,\n  family = \"primary\",\n  weight = \"regular\",\n  secondary = false,\n  style,\n}) {\n  const colors = useColors();\n  const font = fonts[family][weight];\n  const color = secondary ? colors.primary[6] : colors.primary[1];\n  return (\n    <Animated.Text style={[{ ...font, color }, styles.text, style]}>\n      {children}\n    </Animated.Text>\n  );\n};\n\nconst styles = StyleSheet.create({\n  text: {},\n});\n","import React, { FC } from \"react\";\nimport {\n  StyleSheet,\n  TouchableOpacity,\n  TouchableOpacityProps,\n} from \"react-native\";\nimport { hapticFeedback, scale, playSound } from \"op-utils\";\nimport { Text, TextFamily, TextWeight } from \"./Text\";\n\nexport const defaultButtonTextSize = scale(32);\n\ninterface ButtonProps extends TouchableOpacityProps {\n  highlighted?: boolean;\n  label: string;\n  textColor?: string;\n  textFamily?: TextFamily;\n  textSize?: number;\n  textWeight?: TextWeight;\n  addAnimation?: object;\n}\n\nexport const Button: FC<ButtonProps> = function ({\n  children,\n  highlighted = true,\n  label,\n  style = {},\n  textFamily,\n  textColor,\n  textSize = defaultButtonTextSize,\n  textWeight = \"semibold\",\n  addAnimation = {},\n  ...otherProps\n}) {\n  const handlePressIn = () => {\n    hapticFeedback.generate(\"impactMedium\");\n    playSound(\"buttonPress\");\n  };\n  return (\n    <TouchableOpacity\n      style={[styles.touchable, style]}\n      onPressIn={handlePressIn}\n      {...otherProps}\n    >\n      <Text\n        secondary={!highlighted}\n        family={textFamily}\n        weight={textWeight}\n        style={[\n          styles.label,\n          highlighted && styles.labelHighlighted,\n          textColor && { color: textColor },\n          { fontSize: textSize },\n          addAnimation,\n        ]}\n      >\n        {label.toLowerCase()}\n      </Text>\n      {children}\n    </TouchableOpacity>\n  );\n};\n\nconst styles = StyleSheet.create({\n  touchable: {\n    flexDirection: \"row\",\n  },\n  label: {},\n  labelHighlighted: {},\n});\n","import React, { FC } from \"react\";\nimport { StyleSheet, Animated } from \"react-native\";\nimport { animations } from \"op-design\";\nimport { scale } from \"op-utils\";\nimport { defaultButtonTextSize } from \"./Button\";\n\ninterface BottomNavProps {\n  animValue: Animated.Value;\n}\n\nexport const BottomNav: FC<BottomNavProps> = function ({\n  animValue,\n  children,\n}) {\n  return (\n    <Animated.View style={[styles.root, animations.fadeSlideBottom(animValue)]}>\n      {children}\n    </Animated.View>\n  );\n};\n\nconst marginTop = scale(10);\nconst marginBottom = scale(24);\n\nconst styles = StyleSheet.create({\n  root: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    marginTop,\n    marginBottom,\n  },\n});\n\nexport const bottomNavHeight = marginTop + marginBottom + defaultButtonTextSize;\n","import React, { FC } from \"react\";\nimport { StyleSheet, Animated } from \"react-native\";\nimport { metrics, animations } from \"op-design\";\nimport { Text } from \"op-common\";\nimport { observer } from \"mobx-react-lite\";\nimport { scale } from \"op-utils\";\n\ninterface HeaderProps {\n  fadeAnimValue: Animated.Value;\n  name: string;\n  prefix: string;\n  fontSize?: number;\n}\n\nexport const Header: FC<HeaderProps> = observer(function ({\n  fadeAnimValue,\n  name,\n  prefix,\n  fontSize = scale(34),\n}) {\n  const textStyle = {\n    fontSize,\n  };\n  return (\n    <Animated.View\n      style={[styles.root, animations.fadeSlideTop(fadeAnimValue)]}\n    >\n      <Animated.View style={styles.identifier}>\n        <Animated.View style={styles.textIdentifier}>\n          <Text weight=\"bold\" secondary style={[styles.text, textStyle]}>\n            {prefix}{\" \"}\n          </Text>\n          <Text weight=\"bold\" style={[styles.text, textStyle]}>\n            {name}\n          </Text>\n        </Animated.View>\n      </Animated.View>\n    </Animated.View>\n  );\n});\n\nconst marginTop = metrics.topMargin;\nconst marginBottom = metrics.topMargin;\nconst fontSize = scale(34);\n\nconst styles = StyleSheet.create({\n  root: {\n    flexDirection: \"column\",\n    marginTop,\n    marginBottom,\n    zIndex: 200,\n  },\n  identifier: {\n    flexDirection: \"column\",\n  },\n  text: {\n    fontSize,\n  },\n  textIdentifier: {\n    flexDirection: \"row\",\n  },\n  logo: {\n    alignSelf: \"flex-start\",\n  },\n});\n\nexport const headerHeight = marginBottom + marginTop + fontSize;\n","import React, { FC } from \"react\";\nimport {\n  StyleSheet,\n  View,\n  TextStyle,\n  ViewStyle,\n  Animated,\n  Platform,\n} from \"react-native\";\nimport { observer } from \"mobx-react\";\nimport { useColors } from \"op-design\";\nimport { Text } from \"op-common\";\nimport { Cell } from \"./store\";\n\ninterface Props {\n  cell: Cell;\n  size: number;\n  successAnimValue: Animated.Value;\n}\n\nexport const calculateFontSize = (size: number) => size * 0.6;\n\nexport const calculateBorderWidth = (size: number) => Math.floor(size / 14);\n\nconst adjustBorderForOrientation = (cell: Cell, style: ViewStyle) => {\n  if (cell.orientation === \"horizontal-left\") {\n    style.borderRightWidth = 0;\n  }\n  if (cell.orientation === \"horizontal-middle\") {\n    style.borderRightWidth = 0;\n    style.borderLeftWidth = 0;\n  }\n  if (cell.orientation === \"horizontal-right\") {\n    style.borderLeftWidth = 0;\n  }\n  if (cell.orientation === \"vertical-top\") {\n    style.borderBottomWidth = 0;\n  }\n  if (cell.orientation === \"vertical-middle\") {\n    style.borderBottomWidth = 0;\n    style.borderTopWidth = 0;\n  }\n  if (cell.orientation === \"vertical-bottom\") {\n    style.borderTopWidth = 0;\n  }\n};\n\nexport const Tile: FC<Props> = observer(function (props) {\n  const colors = useColors();\n  const { cell, size, successAnimValue } = props;\n\n  // Border width\n  const borderWidth = calculateBorderWidth(size);\n\n  // Tile size\n  let tileStyle: ViewStyle = {};\n  tileStyle.width = size;\n  tileStyle.height = size;\n  if (cell.col === 0) {\n    tileStyle.width = size + borderWidth;\n  }\n  if (cell.row === 0) {\n    tileStyle.height = size + borderWidth;\n  }\n\n  // Tile border style\n  tileStyle.borderColor = colors.primary[7];\n  tileStyle.borderRightWidth = borderWidth;\n  tileStyle.borderBottomWidth = borderWidth;\n  if (cell.col === 0) {\n    tileStyle.borderLeftWidth = borderWidth;\n  }\n  if (cell.row === 0) {\n    tileStyle.borderTopWidth = borderWidth;\n  }\n  adjustBorderForOrientation(cell, tileStyle);\n  // @ts-ignore\n  tileStyle.borderColor = successAnimValue.interpolate({\n    inputRange: [0, 1],\n    outputRange: [colors.primary[7], colors.primary[9]],\n  });\n\n  // Tile background color\n  tileStyle.backgroundColor = \"transparent\";\n  if (cell.completed) {\n    tileStyle.backgroundColor = colors.primary[3];\n  } else if (cell.orientation !== \"none\") {\n    tileStyle.backgroundColor = colors.primary[5];\n  }\n\n  // Content color (shouldn't be needed, but declaring it here fixes some a\n  // couple of white gaps on Android)\n  const contentStyle: ViewStyle = {};\n  if (cell.completed) {\n    contentStyle.backgroundColor = colors.primary[3];\n  } else if (cell.orientation !== \"none\") {\n    contentStyle.backgroundColor = colors.primary[5];\n  }\n\n  // Content border\n  if (cell.orientation !== \"none\") {\n    contentStyle.borderColor = colors.primary[1];\n    contentStyle.borderTopWidth = borderWidth;\n    contentStyle.borderRightWidth = borderWidth;\n    contentStyle.borderBottomWidth = borderWidth;\n    contentStyle.borderLeftWidth = borderWidth;\n  }\n  adjustBorderForOrientation(cell, contentStyle);\n\n  // Content position\n  contentStyle.top = -borderWidth;\n  contentStyle.left = -borderWidth;\n  contentStyle.right = -borderWidth;\n  contentStyle.bottom = -borderWidth;\n\n  // Text style\n  const textStyle: TextStyle = {};\n  if (cell.value === \".\" && cell.orientation === \"none\") {\n    // textStyle.color = colors.primary[0];\n    textStyle.color = \"#fff\";\n  } else {\n    textStyle.color = \"#fff\";\n  }\n  textStyle.fontSize = calculateFontSize(size);\n  if (Platform.OS === \"android\" || Platform.OS === \"ios\") {\n    textStyle.paddingRight = borderWidth / 2;\n    textStyle.paddingBottom = borderWidth;\n    if (cell.col === 0) {\n      textStyle.paddingRight = 0;\n    }\n    if (cell.row === 0) {\n      textStyle.paddingBottom = 0;\n    }\n  } else {\n    // For some reasons on the web the text centering glitches a bit when a cell\n    // is extended... I suppose there might be some differences on who the cell\n    // border is kept into account for the centering calculation.\n    if (\n      cell.orientation === \"horizontal-middle\" ||\n      cell.orientation === \"horizontal-left\"\n    ) {\n      textStyle.paddingRight = borderWidth;\n    }\n    if (\n      cell.orientation === \"vertical-middle\" ||\n      cell.orientation === \"vertical-top\"\n    ) {\n      textStyle.paddingBottom = borderWidth;\n    }\n  }\n\n  // if (Platform.OS !== \"android\" && Platform.OS !== \"ios\") {\n  //   // @ts-ignore\n  //   textStyle.userSelect = \"none\";\n  // }\n  // @ts-ignore\n  textStyle.userSelect = \"none\";\n  // @ts-ignore\n  tileStyle.userSelect = \"none\";\n\n  // Hover style\n  const hoverStyle: ViewStyle = {};\n  hoverStyle.backgroundColor = colors.primary[1];\n\n  // Symbol\n  const symbol = cell.value === \".\" ? \"•\" : cell.value;\n\n  return (\n    <Animated.View style={[styles.root, tileStyle]} pointerEvents=\"none\">\n      <View style={[styles.content, contentStyle]} />\n      <Text\n        family=\"secondary\"\n        weight=\"semibold\"\n        style={[styles.text, textStyle]}\n        selectable={false}\n      >\n        {symbol}\n      </Text>\n      {cell.highlighted && <View style={[styles.hover, hoverStyle]} />}\n    </Animated.View>\n  );\n});\n\nconst styles = StyleSheet.create({\n  root: {\n    position: \"relative\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  text: {\n    position: \"absolute\",\n    textAlign: \"center\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  content: {\n    position: \"absolute\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  hover: {\n    position: \"absolute\",\n    opacity: 0.5,\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n  },\n});\n","import React, { FC } from \"react\";\nimport { StyleSheet, Animated, ViewStyle } from \"react-native\";\nimport { Text } from \"op-common\";\nimport { scale } from \"op-utils\";\nimport { animations } from \"op-design\";\nimport { Button } from \"./Button\";\n\ninterface ScoreProps {\n  animValue: Animated.Value;\n  onPress?: () => void;\n  score?: string | number;\n  style?: ViewStyle;\n}\n\nexport const Score: FC<ScoreProps> = function ({\n  animValue,\n  onPress,\n  score,\n  style,\n}) {\n  if (!score) return null;\n  const buttonHitSlop = {\n    top: scale(20),\n    bottom: scale(20),\n    left: scale(20),\n    right: scale(20),\n  };\n  return (\n    <Animated.View style={[styles.root, animations.fade(animValue), style]}>\n      <Button\n        disabled={!onPress}\n        onPress={onPress}\n        hitSlop={buttonHitSlop}\n        label={String(score)}\n        textFamily=\"secondary\"\n        textSize={scale(20)}\n        style={styles.content}\n      >\n        <Text weight=\"semibold\" family=\"secondary\" style={styles.star}>\n          {\" \"}\n          ★\n        </Text>\n      </Button>\n    </Animated.View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  root: {\n    position: \"absolute\",\n    alignSelf: \"flex-end\",\n  },\n  content: {\n    alignItems: \"center\",\n  },\n  score: {\n    fontSize: scale(20),\n  },\n  star: {\n    fontSize: scale(16),\n  },\n});\n","import React, { FC } from \"react\";\nimport { View, Platform, ViewProps, GestureResponderEvent } from \"react-native\";\n\nconst getEventCoordinates = (\n  event: GestureResponderEvent\n): [number, number] => {\n  // On Android and iOS, let's use the native location which are relative\n  // to the target view.\n  if (Platform.OS === \"android\" || Platform.OS === \"ios\") {\n    return [event.nativeEvent.locationX, event.nativeEvent.locationY];\n  }\n\n  // On the web, touch events coords are relative to the root (still no idea\n  // why) so we need to take into account the target view offset.\n  // @ts-ignore\n  const touch = event?.targetTouches?.[0] || event?.changedTouches?.[0];\n  if (touch) {\n    // @ts-ignore\n    const targetViewCoords = event?.target?.getBoundingClientRect?.();\n    event.preventDefault();\n    return [\n      touch.clientX - targetViewCoords.x,\n      touch.clientY - targetViewCoords.y,\n    ] as [number, number];\n  }\n\n  // On the web (desktop), we can use layerX and layerY which are relative to\n  // the target view.\n  // @ts-ignore\n  return [event?.nativeEvent?.layerX, event?.nativeEvent?.layerY];\n};\n\ninterface PointerAwareViewProps extends ViewProps {\n  onPointerDown: (coords: [number, number]) => void;\n  onPointerMove: (coords: [number, number]) => void;\n  onPointerUp: (coords: [number, number]) => void;\n  pointerEnabled?: boolean;\n}\n\nexport const PointerAwareView: FC<PointerAwareViewProps> = ({\n  children,\n  onPointerDown,\n  onPointerMove,\n  onPointerUp,\n  pointerEnabled = false,\n  style,\n  ...otherProps\n}) => {\n  const cursorStyle = Platform.select({\n    native: {},\n    default: {\n      cursor: pointerEnabled ? \"pointer\" : undefined,\n    },\n  });\n  return (\n    <View\n      pointerEvents={pointerEnabled ? undefined : \"none\"}\n      onTouchStart={(e) => onPointerDown(getEventCoordinates(e))}\n      onTouchMove={(e) => onPointerMove(getEventCoordinates(e))}\n      onTouchEnd={(e) => onPointerUp(getEventCoordinates(e))}\n      // @ts-ignore\n      onMouseDown={(e) => onPointerDown(getEventCoordinates(e))}\n      // @ts-ignore\n      onMouseMove={(e) => onPointerMove(getEventCoordinates(e))}\n      // @ts-ignore\n      onMouseUp={(e) => onPointerUp(getEventCoordinates(e))}\n      // @ts-ignore\n      onMouseLeave={(e) => onPointerUp(getEventCoordinates(e))}\n      // @ts-ignore\n      style={[style, cursorStyle]}\n      {...otherProps}\n    >\n      {children}\n    </View>\n  );\n};\n","import React, { FC, useEffect } from \"react\";\nimport { View, StyleSheet, Animated, Platform } from \"react-native\";\nimport { reaction } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { animations, useColors } from \"op-design\";\nimport { useAnimation, useOnMount, hapticFeedback } from \"op-utils\";\nimport { useCoreStores } from \"op-core\";\nimport { autoSolve } from \"op-config\";\nimport { useBoardStores } from \"./store\";\nimport { Tile } from \"./Tile\";\nimport { PointerAwareView } from \"./PointerAwareView\";\n\nconst isAndroid = Platform.OS === \"android\";\n\ninterface BoardProps {\n  availableHorizontalSpace: number;\n  availableVerticalSpace: number;\n  onClearedAnimEnd?: () => void;\n  onClearedAnimStart?: () => void;\n}\n\nexport const Board: FC<BoardProps> = observer(function ({\n  availableHorizontalSpace,\n  availableVerticalSpace,\n  onClearedAnimEnd = () => undefined,\n  onClearedAnimStart = () => undefined,\n}) {\n  const { board, interactions } = useBoardStores();\n  const { puzzle } = useCoreStores();\n  const colors = useColors();\n\n  // Animations setup\n  const fadeInAnimDuration = 400;\n  const fadeOutAnimDuration = 200;\n  const successAnimDuration = 200;\n  const successAnimDelay = 400;\n  const fadeAnim = useAnimation();\n  const successAnim = useAnimation();\n  const animateSuccess = () => {\n    onClearedAnimStart();\n    Animated.sequence([\n      successAnim.setup({\n        duration: successAnimDuration,\n        useNativeDriver: false,\n      }),\n      Animated.delay(successAnimDelay),\n      fadeAnim.setup({ duration: fadeOutAnimDuration, toValue: 0 }),\n    ]).start(onClearedAnimEnd);\n  };\n\n  useOnMount(() => {\n    fadeAnim.setup({ duration: fadeInAnimDuration }).start();\n  });\n\n  // Auto-solve the puzzle in development mode if needed\n  if (autoSolve) {\n    useOnMount(() => {\n      setTimeout(animateSuccess, 2000);\n    });\n  }\n\n  // - Trigger an light haptic feedback when a cell is pressed\n  // - Trigger the success animation when the board is cleared\n  useEffect(() => {\n    if (!puzzle.data) {\n      throw new Error('Board » missing \"puzzle.data\"');\n    }\n    const isContinuing = puzzle.id === board.puzzleId;\n    if (!isContinuing) {\n      board.initialize(puzzle.id, puzzle.data);\n    }\n    const disposeHapticReaction = reaction(\n      () => interactions.hoveredCell,\n      () => hapticFeedback.generate(\"impactLight\")\n    );\n    const disposeClearedReaction = reaction(\n      () => board.cleared,\n      (didSucceed) => {\n        if (didSucceed) {\n          animateSuccess();\n        }\n      }\n    );\n    return () => {\n      disposeHapticReaction();\n      disposeClearedReaction();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [puzzle.id]);\n\n  // Don't show the board unless initializes, otherwise the cells might not\n  // work correctly\n  if (!board.isInitialized) return null;\n\n  // Scale the board given the vertical and horizontal contraints defined\n  // in the pros\n  const doesBoardFitVertically =\n    (availableHorizontalSpace / board.colsCount) * board.rowsCount <\n    availableVerticalSpace;\n  const tileSize = doesBoardFitVertically\n    ? Math.floor(availableHorizontalSpace / board.colsCount)\n    : Math.floor(availableVerticalSpace / board.rowsCount);\n\n  // On Android transitioning the opacity of the root view causes a janky\n  // animation. As a workaround we place an absolutely positioned layer on top\n  // of the UI and transition its opacity instead.\n  const androidOpacityStyle = {\n    backgroundColor: colors.primary[9],\n    opacity: fadeAnim.value.interpolate({\n      inputRange: [0, 1],\n      outputRange: [1, 0],\n    }),\n  };\n\n  return (\n    <PointerAwareView\n      onPointerDown={(coords) => interactions.onGridPointerDown(coords)}\n      onPointerMove={(coords) => interactions.onGridPointerMove(coords)}\n      onPointerUp={(coords) => interactions.onGridPointerUp(coords)}\n      onLayout={(e) => interactions.enableInteraction(e)}\n      pointerEnabled={!board.cleared}\n      style={styles.root}\n    >\n      <Animated.View style={!isAndroid && animations.fade(fadeAnim.value)}>\n        {board.grid.map((cellsRow, rowIndex) => (\n          <View style={[styles.row]} key={rowIndex} pointerEvents=\"none\">\n            {cellsRow.map((cell) => (\n              <Tile\n                key={cell.id}\n                cell={cell}\n                size={tileSize}\n                successAnimValue={successAnim.value}\n              />\n            ))}\n          </View>\n        ))}\n      </Animated.View>\n      {isAndroid && (\n        <Animated.View\n          style={[styles.androidOpacity, androidOpacityStyle]}\n          pointerEvents=\"none\"\n        />\n      )}\n    </PointerAwareView>\n  );\n});\n\nconst styles = StyleSheet.create({\n  root: {},\n  row: {\n    flexDirection: \"row\",\n  },\n  androidOpacity: {\n    position: \"absolute\",\n    top: -5,\n    left: -5,\n    right: -5,\n    bottom: -5,\n  },\n});\n","import React, { FC } from \"react\";\nimport { StyleSheet, View, Animated } from \"react-native\";\nimport { Text, AnimatedLetter } from \"op-common\";\nimport { scale } from \"op-utils\";\n\ninterface LogoProps {\n  titleAnimValue: Animated.Value;\n  dotAnimValue: Animated.Value;\n}\n\nexport const Logo: FC<LogoProps> = function ({ titleAnimValue, dotAnimValue }) {\n  const title1 = \"Ordinary\";\n  const title2 = \"Puzzles\";\n  const titleLength = title1.length + title2.length;\n  const charShowAnimDuration = 1 / titleLength;\n  const dotAnimStyle = {\n    opacity: dotAnimValue,\n    transform: [{ scale: dotAnimValue }],\n  };\n  return (\n    <View style={styles.root}>\n      <View style={styles.titleRow}>\n        {title1.split(\"\").map((char, index) => {\n          const delay = charShowAnimDuration * index;\n          return (\n            <AnimatedLetter\n              key={index}\n              animValue={titleAnimValue}\n              delay={delay}\n              style={styles.text}\n              value={char}\n            />\n          );\n        })}\n      </View>\n      <View style={styles.titleRow2}>\n        {title2.split(\"\").map((char, index) => {\n          const title1AnimDuration = charShowAnimDuration * title1.length;\n          const delay = title1AnimDuration + charShowAnimDuration * index;\n          return (\n            <AnimatedLetter\n              key={index}\n              animValue={titleAnimValue}\n              delay={delay}\n              style={styles.text}\n              value={char}\n            />\n          );\n        })}\n        <Text weight=\"bold\" secondary style={[styles.text, dotAnimStyle]}>\n          .\n        </Text>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  root: {},\n  titleRow: {\n    flexDirection: \"row\",\n  },\n  titleRow2: {\n    flexDirection: \"row\",\n  },\n  text: {\n    fontSize: scale(62),\n  },\n});\n","import React, { FC } from \"react\";\nimport { StyleSheet, Animated } from \"react-native\";\nimport { Button, Text } from \"op-common\";\nimport { PuzzleMode } from \"op-core\";\nimport { animations, useColors } from \"op-design\";\nimport { scale } from \"op-utils\";\n\nexport interface MenuItem {\n  label: string;\n  value: PuzzleMode | \"continue\";\n  highlighted?: boolean;\n  starred?: boolean;\n  onPress: (value: PuzzleMode | \"continue\") => void;\n}\n\ninterface MenuProps {\n  animValue: Animated.Value;\n  disabled?: boolean;\n  items: MenuItem[];\n}\n\nexport const Menu: FC<MenuProps> = function ({ animValue, disabled, items }) {\n  const colors = useColors();\n  const starStyle = {\n    color: colors.primary[5],\n  };\n  return (\n    <Animated.View style={[styles.root, animations.fade(animValue)]}>\n      {items.map((item) => (\n        <Button\n          key={item.value}\n          disabled={disabled}\n          highlighted={item.highlighted}\n          style={styles.button}\n          textSize={styles.text.fontSize}\n          onPress={() => item.onPress(item.value)}\n          label={item.label}\n        >\n          {item.starred && (\n            <Text weight=\"bold\" style={[styles.text, starStyle]}>\n              *\n            </Text>\n          )}\n        </Button>\n      ))}\n    </Animated.View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  root: {},\n  button: {\n    marginBottom: scale(2),\n    alignSelf: \"flex-start\",\n  },\n  text: {\n    fontSize: scale(42),\n  },\n});\n","import React, { FC, useState } from \"react\";\nimport { View, StyleSheet, Animated, Platform, ViewStyle } from \"react-native\";\nimport { observer } from \"mobx-react\";\nimport { useCoreStores, PuzzleMode } from \"op-core\";\nimport { useBoardStores } from \"op-board\";\nimport { metrics, animations } from \"op-design\";\nimport { scale, useAnimation, useOnMount } from \"op-utils\";\nimport { Score } from \"op-common\";\nimport { Logo } from \"./Logo\";\nimport { Menu, MenuItem } from \"./Menu\";\nimport { About } from \"./About\";\n\nexport const Home: FC = observer(function () {\n  // Initialization\n  const { router, stats } = useCoreStores();\n  const { board } = useBoardStores();\n\n  // Animations setup\n  // https://github.com/facebook/react-native/issues/27146\n  const maxOpacity = Platform.OS === \"android\" ? 0.99 : 1;\n  const animateInSequence = !router.hasLoadedHomeOnce;\n  const titleAnimDuration = 600;\n  const menuAnimDuration = 600;\n  const dotAnimDuration = 200;\n  const rootFadeInAnimDuration = 200;\n  const rootFadeOutAnimDuration = 200;\n  const [isMenuDisabled, setIsMenuDisabled] = useState(true);\n  const titleAnim = useAnimation(animateInSequence ? 0 : 1);\n  const menuAnim = useAnimation(animateInSequence ? 0 : 1);\n  const dotAnim = useAnimation(animateInSequence ? 0 : 1);\n  const rootFadeAnim = useAnimation(animateInSequence ? maxOpacity : 0);\n  useOnMount(() => {\n    if (router.hasLoadedHomeOnce) {\n      rootFadeAnim.setup({ duration: rootFadeInAnimDuration }).start(() => {\n        setIsMenuDisabled(false);\n      });\n    } else {\n      Animated.sequence([\n        titleAnim.setup({ duration: titleAnimDuration }),\n        dotAnim.setup({ duration: dotAnimDuration }),\n      ]).start(() => {\n        setIsMenuDisabled(false);\n        menuAnim.setup({ duration: menuAnimDuration }).start();\n      });\n    }\n  });\n\n  // Menu items setup\n  const canContinue = board.isInitialized;\n  const handleItemPress = (value: PuzzleMode | \"continue\") => {\n    if (isMenuDisabled) return;\n    setIsMenuDisabled(true);\n    rootFadeAnim\n      .setup({ duration: rootFadeOutAnimDuration, toValue: 0 })\n      .start(() => {\n        if (value === \"tutorial\") {\n          router.changeRoute(value);\n        } else {\n          router.changeRoute(\"intro\", value);\n        }\n      });\n  };\n  const menuItems: MenuItem[] = [\n    {\n      label: \"start\",\n      value: \"tutorial\",\n      onPress: handleItemPress,\n      highlighted: !canContinue,\n    },\n  ];\n  if (canContinue) {\n    menuItems.unshift({\n      label: \"continue\",\n      value: \"continue\",\n      onPress: handleItemPress,\n      highlighted: true,\n    });\n  }\n\n  // Score setup\n  const scoreStyle: ViewStyle = {\n    top: metrics.screenMargin,\n    right: metrics.screenMargin,\n  };\n  const handleScorePress = () => {\n    if (isMenuDisabled) return;\n    setIsMenuDisabled(true);\n    rootFadeAnim\n      .setup({ duration: rootFadeOutAnimDuration, toValue: 0 })\n      .start(() => {\n        router.changeRoute(\"stats\");\n      });\n  };\n\n  return (\n    <Animated.View style={[styles.root, animations.fade(rootFadeAnim.value)]}>\n      <View style={styles.top}>\n        <Logo titleAnimValue={titleAnim.value} dotAnimValue={dotAnim.value} />\n      </View>\n      <View style={styles.bottom}>\n        <Menu\n          animValue={menuAnim.value}\n          disabled={isMenuDisabled}\n          items={menuItems}\n        />\n      </View>\n      {/* {Platform.OS === \"web\" && (\n        <About animValue={menuAnim.value} style={styles.about} />\n      )} */}\n    </Animated.View>\n  );\n});\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    paddingVertical: metrics.screenMargin * 2,\n    paddingHorizontal: metrics.screenMargin,\n  },\n  top: {\n    flex: 1,\n    justifyContent: \"center\",\n  },\n  bottom: {\n    flex: 1,\n    flexDirection: \"column\",\n    justifyContent: \"flex-end\",\n  },\n  about: {\n    position: \"absolute\",\n    alignItems: \"flex-end\",\n    bottom: metrics.screenMargin * 2 + scale(5),\n    right: metrics.screenMargin,\n  },\n});\n","import { Fragment } from \"react\";\n\nexport default Fragment;\n","import React, { FC, useRef } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  Animated,\n  Platform,\n  Dimensions,\n  useWindowDimensions,\n} from \"react-native\";\nimport { observer } from \"mobx-react\";\nimport KeepAwake from \"op-native/react-native-keep-awake\";\nimport { Board } from \"op-board\";\nimport { useCoreStores } from \"op-core\";\nimport { useBoardStores } from \"op-board\";\nimport {\n  BottomNav,\n  bottomNavHeight,\n  Button,\n  Header,\n  headerHeight,\n} from \"op-common\";\nimport { metrics, animations } from \"op-design\";\nimport { useAnimation, useOnMount, useHardwareBackButton } from \"op-utils\";\nimport { clamp } from \"lodash\";\n\nexport const Game: FC = observer(function () {\n  const { puzzle, router } = useCoreStores();\n  const { board } = useBoardStores();\n  const interactionsDisabledRef = useRef(false);\n\n  // Screen width/height setup\n  const windowDimensions = useWindowDimensions();\n  const screenWidth = Platform.select({\n    native: Dimensions.get(\"screen\").width,\n    default: clamp(windowDimensions.width, metrics.webBoardMaxLayoutWidth),\n  });\n  const screenHeight = Platform.select({\n    native: Dimensions.get(\"screen\").height,\n    default: windowDimensions.height,\n  });\n\n  // Routing setup\n  const navigateToHome = () => router.changeRoute(\"home\");\n  const navigateToSuccess = () => {\n    if (puzzle.mode == \"large\") {\n      router.changeRoute(\"finish\");\n    } else {\n      router.changeRoute(\"success\");\n    }\n  };\n  useHardwareBackButton(navigateToHome);\n\n  // Animations setup\n  // https://github.com/facebook/react-native/issues/27146\n  const maxOpacity = Platform.OS === \"android\" ? 0.99 : 1;\n  const fadeInterfaceInAnimDuration = 400;\n  const fadeInterfaceOutAnimDuration = 200;\n  const fadeRootOutDuration = 200;\n  const fadeInterfaceAnim = useAnimation();\n  const fadeRootAnim = useAnimation(maxOpacity);\n  const fadeInterfaceIn = () =>\n    fadeInterfaceAnim.setup({ duration: fadeInterfaceInAnimDuration });\n  const fadeInterfaceOut = () =>\n    fadeInterfaceAnim.setup({\n      duration: fadeInterfaceOutAnimDuration,\n      toValue: 0,\n    });\n  const fadeRootOut = () =>\n    fadeRootAnim.setup({ duration: fadeRootOutDuration });\n\n  useOnMount(() => {\n    fadeInterfaceIn().start();\n  });\n\n  // Callback handlers\n  const handleMenuPress = () => {\n    if (interactionsDisabledRef.current) return;\n    interactionsDisabledRef.current = true;\n    fadeRootOut().start(navigateToHome);\n  };\n  const handleResetPress = () => {\n    if (interactionsDisabledRef.current) return;\n    board.reset();\n  };\n  const handleBoardClearedAnimStart = () => {\n    interactionsDisabledRef.current = true;\n    puzzle.onPuzzleCompleted();\n  };\n  const handleBoardClearedAnimEnd = () => {\n    board.destroy();\n    fadeInterfaceOut().start(navigateToSuccess);\n  };\n\n  // Calculate the available space for the board\n  const availableHorizontalSpace = screenWidth - metrics.screenMargin * 2;\n  const availableVerticalSpace =\n    screenHeight -\n    metrics.screenMargin * 2 -\n    bottomNavHeight -\n    headerHeight -\n    metrics.screenMargin * 4; // Additional vertical padding\n\n  return (\n    <Animated.View style={[styles.root, animations.fade(fadeRootAnim.value)]}>\n      <KeepAwake />\n      {/* <Header\n        prefix={puzzle.prefix}\n        name={puzzle.name}\n        fadeAnimValue={fadeInterfaceAnim.value}\n      /> */}\n      <View style={styles.boardWrapper}>\n        {puzzle.data && (\n          <Board\n            onClearedAnimStart={handleBoardClearedAnimStart}\n            onClearedAnimEnd={handleBoardClearedAnimEnd}\n            availableHorizontalSpace={availableHorizontalSpace}\n            availableVerticalSpace={availableVerticalSpace}\n          />\n        )}\n      </View>\n      <BottomNav animValue={fadeInterfaceAnim.value}>\n        {/* <Button label=\"Menu\" onPress={handleMenuPress} /> */}\n        <Button label=\"Reset\" onPress={handleResetPress} />\n      </BottomNav>\n    </Animated.View>\n  );\n});\n\nconst styles = StyleSheet.create({\n  root: {\n    marginHorizontal: metrics.screenMargin,\n    flex: 1,\n  },\n  boardWrapper: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n});\n","import React, { FC, useRef } from \"react\";\nimport { StyleSheet, Animated, TouchableWithoutFeedback } from \"react-native\";\nimport { animations, metrics } from \"op-design\";\nimport { AnimatedLetter } from \"op-common\";\nimport { useAnimation, scaleTextToFit, delay, useOnMount } from \"op-utils\";\nimport { useCoreStores } from \"op-core\";\n\nconst asyncAnimationStart = (anim: Animated.CompositeAnimation) =>\n  new Promise((resolve) => anim.start(resolve));\n\nexport const Intro: FC = function () {\n  const { puzzle, router } = useCoreStores();\n  const skippingEnabledRef = useRef(true);\n  const hasSkippedRef = useRef(false);\n\n  // Routing setup\n  const handleComplete = () => router.changeRoute(\"game\");\n\n  // Animation setup\n  const showAnimDuration = 400;\n  const animDelay = 1000;\n  const hideAnimDuration = 400;\n  const showAnim = useAnimation();\n  const hideAnim = useAnimation(1);\n  const animate = async () => {\n    await asyncAnimationStart(showAnim.setup({ duration: showAnimDuration }));\n    await delay(animDelay);\n    skippingEnabledRef.current = false;\n    if (!hasSkippedRef.current) {\n      await asyncAnimationStart(hideAnim.setup({ duration: hideAnimDuration }));\n      handleComplete();\n    }\n  };\n  useOnMount(() => {\n    animate();\n  });\n\n  // If the user touches the screen, end the animation early\n  const handlePress = () => {\n    if (!skippingEnabledRef.current || hasSkippedRef.current) return;\n    hasSkippedRef.current = true;\n    hideAnim.setup({ duration: hideAnimDuration }).start(handleComplete);\n  };\n\n  // Split the title into multiple charaters to animate them asynchronously\n  const name = \"level\";\n  const fitFontSize = scaleTextToFit(`${puzzle.prefix} ${name}`);\n  const digitList = puzzle.prefix.split(\"\");\n  const letterList = name.split(\"\");\n  const chars = digitList\n    .map((digit) => ({ type: \"digit\", value: digit }))\n    .concat({ type: \"space\", value: \" \" })\n    .concat(letterList.map((letter) => ({ type: \"letter\", value: letter })));\n\n  return (\n    <TouchableWithoutFeedback onPress={handlePress}>\n      <Animated.View\n        style={[styles.root, animations.fadeSlideTop(hideAnim.value)]}\n      >\n        {chars.map((char, index) => {\n          const delay = (1 / chars.length) * index;\n          return (\n            <AnimatedLetter\n              key={index}\n              animValue={showAnim.value}\n              delay={delay}\n              secondary={char.type === \"digit\"}\n              value={char.value}\n              style={[styles.letter, { fontSize: fitFontSize }]}\n            />\n          );\n        })}\n      </Animated.View>\n    </TouchableWithoutFeedback>\n  );\n};\n\nconst styles = StyleSheet.create({\n  root: {\n    marginHorizontal: metrics.screenMargin,\n    flex: 1,\n    alignItems: \"center\",\n    flexDirection: \"row\",\n  },\n  letter: {},\n});\n","import React, { FC } from \"react\";\nimport { Animated, StyleSheet, ViewProps } from \"react-native\";\nimport { Text } from \"op-common\";\nimport { animations } from \"op-design\";\nimport { scale } from \"op-utils\";\n\ninterface DescriptionProps extends ViewProps {\n  animValue: Animated.Value;\n  title: string;\n  message: string;\n}\n\nexport const Description: FC<DescriptionProps> = function ({\n  animValue,\n  title,\n  message,\n  ...otherProps\n}) {\n  return (\n    <Animated.View\n      style={[styles.root, animations.fadeSlideTop(animValue)]}\n      {...otherProps}\n    >\n      <Text weight=\"bold\" style={styles.title}>\n        {title}\n      </Text>\n      <Text weight=\"regular\" style={styles.message}>\n        {message}\n      </Text>\n    </Animated.View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  root: {\n    marginTop: scale(32),\n  },\n  title: {\n    fontSize: scale(24),\n    marginBottom: scale(4),\n  },\n  message: {\n    fontSize: scale(22),\n  },\n});\n","import React, { FC, useRef, useState } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  LayoutChangeEvent,\n  LayoutRectangle,\n  Platform,\n  Dimensions,\n  useWindowDimensions,\n} from \"react-native\";\nimport { observer } from \"mobx-react\";\nimport KeepAwake from \"op-native/react-native-keep-awake\";\nimport { Board } from \"op-board\";\nimport { useBoardStores } from \"op-board\";\nimport { useCoreStores } from \"op-core\";\nimport { metrics } from \"op-design\";\nimport { BottomNav, Button, bottomNavHeight } from \"op-common\";\nimport { useAnimation, useOnMount, useHardwareBackButton } from \"op-utils\";\nimport { Description } from \"./Description\";\nimport { clamp } from \"lodash\";\n\nexport const Tutorial: FC = observer(function () {\n  const { board } = useBoardStores();\n  const { puzzle, router } = useCoreStores();\n\n  // Screen width/height setup\n  const windowDimensions = useWindowDimensions();\n  const screenWidth = Platform.select({\n    native: Dimensions.get(\"screen\").width,\n    default: clamp(windowDimensions.width, metrics.webBoardMaxLayoutWidth),\n  });\n  const screenHeight = Platform.select({\n    native: Dimensions.get(\"screen\").height,\n    default: windowDimensions.height,\n  });\n\n  // Routing setup\n  const navigateToHome = () => router.changeRoute(\"home\");\n  const goToNextTutorial = () => puzzle.nextPuzzle();\n  useHardwareBackButton(navigateToHome);\n\n  // Disable interactions while animating\n  const isUnmountingRef = useRef(false);\n\n  // Fade UI animation\n  const fadeInterfaceInAnimDuration = 200;\n  const fadeInterfaceOutAnimDuration = 200;\n  const fadeInterfaceAnim = useAnimation();\n  useOnMount(() => {\n    fadeInterfaceAnim.setup({ duration: fadeInterfaceInAnimDuration }).start();\n    return () => {\n      board.destroy();\n    };\n  });\n\n  // Wait for every HUD pieces to be mounted so that we can measure their height\n  // and make sure we can fit the board\n  const [\n    descriptionLayout,\n    setDescriptionLayout,\n  ] = useState<LayoutRectangle | null>(null);\n  const handleDescriptionLayout = (event: LayoutChangeEvent) => {\n    if (descriptionLayout?.height !== event.nativeEvent.layout.height) {\n      setDescriptionLayout(event.nativeEvent.layout);\n    }\n  };\n  const availableHorizontalSpace = screenWidth - metrics.screenMargin * 2;\n  const availableVerticalSpace = descriptionLayout\n    ? screenHeight -\n      descriptionLayout.height -\n      bottomNavHeight -\n      metrics.screenMargin * 8 // Additional vertical padding\n    : undefined;\n\n  // Callback handlers\n  const handleMenuPress = () => {\n    if (!isUnmountingRef.current) {\n      navigateToHome();\n    }\n  };\n  const handleBoardClearedAnimStart = () => {\n    isUnmountingRef.current = true;\n    fadeInterfaceAnim\n      .setup({ duration: fadeInterfaceOutAnimDuration, toValue: 0 })\n      .start();\n  };\n  const handleBoardClearedAnimEnd = () => {\n    goToNextTutorial();\n  };\n\n  return (\n    <View style={styles.root}>\n      <KeepAwake />\n      <Description\n        title={puzzle.tutorialTitle}\n        message={puzzle.tutorialMessage}\n        animValue={fadeInterfaceAnim.value}\n        onLayout={handleDescriptionLayout}\n      />\n      <View style={styles.boardWrapper}>\n        {puzzle.data && availableVerticalSpace && (\n          <Board\n            key={puzzle.id}\n            availableHorizontalSpace={availableHorizontalSpace}\n            availableVerticalSpace={availableVerticalSpace}\n            onClearedAnimStart={handleBoardClearedAnimStart}\n            onClearedAnimEnd={handleBoardClearedAnimEnd}\n          />\n        )}\n      </View>\n      {/* {board.isInitialized && (\n        <BottomNav animValue={fadeInterfaceAnim.value}>\n          <Button label=\"menu\" onPress={handleMenuPress} />\n        </BottomNav>\n      )} */}\n    </View>\n  );\n});\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    marginHorizontal: metrics.screenMargin,\n  },\n  boardWrapper: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n});\n","import React, { FC } from \"react\";\nimport { View, StyleSheet, Animated } from \"react-native\";\nimport { Text, Button, BottomNav } from \"op-common\";\nimport {\n  useAnimation,\n  useOnMount,\n  scale,\n  useHardwareBackButton,\n} from \"op-utils\";\nimport { animations } from \"op-design\";\nimport { useCoreStores } from \"op-core\";\n\nexport const Message: FC = function () {\n  const { router, puzzle, stats } = useCoreStores();\n\n  // Routing setup\n  const navigateToHome = () => router.changeRoute(\"home\");\n  const navigateToChallenge = () => router.changeRoute(\"intro\");\n  useHardwareBackButton(navigateToHome);\n\n  // Animations setup\n  const fadeInTitleAnimDuration = 200;\n  const fadeInMessageAnimDuration = 200;\n  const fadeInBottomAnimDuration = 200;\n  const fadeInStaggerDuration = 200;\n  const fadeOutAnimDuration = 200;\n  const fadeTitleAnim = useAnimation();\n  const fadeMessageAnim = useAnimation();\n  const fadeBottomAnim = useAnimation();\n\n  const fadeIn = () =>\n    Animated.stagger(fadeInStaggerDuration, [\n      fadeTitleAnim.setup({ duration: fadeInTitleAnimDuration }),\n      fadeMessageAnim.setup({ duration: fadeInMessageAnimDuration }),\n      fadeBottomAnim.setup({ duration: fadeInBottomAnimDuration }),\n    ]);\n\n  const fadeOut = () =>\n    Animated.parallel([\n      fadeTitleAnim.setup({ duration: fadeOutAnimDuration, toValue: 0 }),\n      fadeMessageAnim.setup({ duration: fadeOutAnimDuration, toValue: 0 }),\n      fadeBottomAnim.setup({ duration: fadeOutAnimDuration, toValue: 0 }),\n    ]);\n\n  useOnMount(() => {\n    fadeIn().start();\n  });\n\n  // Callback handlers\n  const handleButtonPress = () => {\n    fadeOut().start(() => {\n      stats.updateCompletedPuzzles(\"tutorial\", 0);\n      navigateToChallenge();\n    });\n  };\n\n  return (\n    <View style={styles.root}>\n      <View style={styles.top}>\n        <Text\n          weight=\"bold\"\n          style={[\n            styles.title,\n            animations.fadeSlideBottom(fadeTitleAnim.value),\n          ]}\n        >\n          {puzzle.tutorialTitle}\n        </Text>\n        <Text\n          weight=\"regular\"\n          style={[\n            styles.message,\n            animations.fadeSlideBottom(fadeMessageAnim.value),\n          ]}\n        >\n          {puzzle.tutorialMessage}\n        </Text>\n      </View>\n      <BottomNav animValue={fadeBottomAnim.value}>\n        {/* <Button onPress={handleButtonPress} label=\"menu\" /> */}\n        <Button onPress={handleButtonPress} label=\"next\" />\n      </BottomNav>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  root: {\n    margin: scale(20),\n    flex: 1,\n  },\n  top: {\n    flexDirection: \"column\",\n    flex: 1,\n    justifyContent: \"center\",\n  },\n  title: {\n    fontSize: scale(42),\n  },\n  message: {\n    fontSize: scale(26),\n  },\n});\n","import React, { FC, useRef } from \"react\";\nimport { View, StyleSheet, Animated, Platform, ViewStyle } from \"react-native\";\nimport { observer } from \"mobx-react\";\nimport KeepAwake from \"op-native/react-native-keep-awake\";\nimport { useCoreStores } from \"op-core\";\nimport { BottomNav, Button, Header, Score, Text } from \"op-common\";\nimport { metrics, animations } from \"op-design\";\nimport { useAnimation, useOnMount, scale, scaleTextToFit } from \"op-utils\";\n\nexport const Success: FC = observer(function () {\n  const { puzzle, router } = useCoreStores();\n  const interactionsDisabledRef = useRef(false);\n\n  // Routing setup\n  const startNewGame = () => router.changeRoute(\"intro\");\n  const navigateToHome = () => router.changeRoute(\"home\");\n\n  // Animations setup\n  // https://github.com/facebook/react-native/issues/27146\n  const maxOpacity = Platform.OS === \"android\" ? 0.99 : 1;\n  const fadeInterfaceInAnimDuration = 400;\n  const fadeInterfaceInStaggerDuration = 200;\n  const fadeRootOutDuration = 200;\n  const fadeTitleAnim = useAnimation();\n  const fadeSubtilteAnim = useAnimation();\n  const fadeBottomNavAnim = useAnimation();\n  const fadeScoreAnim = useAnimation();\n  const fadeRootAnim = useAnimation(maxOpacity);\n  const fadeInterfaceIn = () =>\n    Animated.stagger(fadeInterfaceInStaggerDuration, [\n      fadeTitleAnim.setup({ duration: fadeInterfaceInAnimDuration }),\n      fadeSubtilteAnim.setup({ duration: fadeInterfaceInAnimDuration }),\n      fadeBottomNavAnim.setup({ duration: fadeInterfaceInAnimDuration }),\n      fadeScoreAnim.setup({ duration: fadeInterfaceInAnimDuration }),\n    ]);\n  const fadeRootOut = () =>\n    fadeRootAnim.setup({ duration: fadeRootOutDuration });\n\n  useOnMount(() => {\n    fadeInterfaceIn().start();\n  });\n\n  // Callback handlers\n  const handleMenuPress = () => {\n    if (interactionsDisabledRef.current) return;\n    interactionsDisabledRef.current = true;\n    fadeRootOut().start(() => {\n      navigateToHome();\n    });\n  };\n  const handleNextPuzzlePress = () => {\n    if (interactionsDisabledRef.current) return;\n    interactionsDisabledRef.current = true;\n    fadeRootOut().start(startNewGame);\n  };\n\n  const fitFontSize = scaleTextToFit(`${puzzle.prefix} ${puzzle.name}`);\n\n  const scoreStyle: ViewStyle = {\n    top: metrics.screenMargin,\n  };\n\n  return (\n    <Animated.View style={[styles.root, animations.fade(fadeRootAnim.value)]}>\n      <KeepAwake />\n      {/* {puzzle.increasesScore && (\n        <Score\n          score={`+${puzzle.score}`}\n          animValue={fadeScoreAnim.value}\n          style={scoreStyle}\n        />\n      )} */}\n      <View style={styles.middle}>\n        <Text\n          weight=\"semibold\"\n          style={[\n            styles.textCompleted,\n            animations.fade(fadeSubtilteAnim.value),\n          ]}\n        >\n          Completed\n        </Text>\n      </View>\n      <BottomNav animValue={fadeBottomNavAnim.value}>\n        {/* <Button label=\"Menu\" onPress={handleMenuPress} /> */}\n        <Button label=\"Next\" onPress={handleNextPuzzlePress} />\n      </BottomNav>\n    </Animated.View>\n  );\n});\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    marginHorizontal: metrics.screenMargin,\n  },\n  middle: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  textCompleted: {\n    fontSize: scale(36),\n  },\n  textScoreValue: {\n    fontSize: scale(32),\n  },\n  completedWrapper: {\n    flexDirection: \"row\",\n  },\n});\n","import React, { FC, useRef } from \"react\";\nimport { StyleSheet, Animated } from \"react-native\";\nimport { observer } from \"mobx-react\";\nimport { useCoreStores } from \"op-core\";\nimport { BottomNav, Button, Text, bottomNavHeight } from \"op-common\";\nimport { metrics, animations } from \"op-design\";\nimport {\n  useAnimation,\n  useOnMount,\n  scale,\n  useHardwareBackButton,\n} from \"op-utils\";\n\nexport const Stats: FC = observer(function () {\n  const { stats, router } = useCoreStores();\n  const interactionsDisabledRef = useRef(false);\n\n  // Routing setup\n  const navigateToHome = () => router.changeRoute(\"home\");\n  useHardwareBackButton(navigateToHome);\n\n  // Animations setup\n  const fadeRootInAnimDuration = 400;\n  const fadeRootOutAnimDuration = 200;\n  const fadeRootAnim = useAnimation(0);\n  const fadeRootIn = () =>\n    fadeRootAnim.setup({ duration: fadeRootInAnimDuration });\n  const fadeRootOut = () =>\n    fadeRootAnim.setup({ duration: fadeRootOutAnimDuration, toValue: 0 });\n\n  useOnMount(() => {\n    fadeRootIn().start();\n  });\n\n  // Callback handlers\n  const handleMenuPress = () => {\n    if (interactionsDisabledRef.current) return;\n    interactionsDisabledRef.current = true;\n    fadeRootOut().start(() => {\n      navigateToHome();\n    });\n  };\n\n  return (\n    <Animated.View style={styles.root}>\n      <Animated.View\n        style={[styles.middle, animations.fade(fadeRootAnim.value)]}\n      >\n        <Text weight=\"bold\" style={styles.title}>\n          Statistics\n        </Text>\n        <Text weight=\"semibold\" style={styles.progress}>\n          small: {stats.completedPuzzles[\"small\"].length}/99\n        </Text>\n        <Text weight=\"semibold\" style={styles.progress}>\n          medium: {stats.completedPuzzles[\"medium\"].length}/99\n        </Text>\n        <Text weight=\"semibold\" style={styles.progress}>\n          large: {stats.completedPuzzles[\"large\"].length}/99\n        </Text>\n        <Text weight=\"bold\" style={styles.score}>\n          score: {stats.score}\n        </Text>\n      </Animated.View>\n      <BottomNav animValue={fadeRootAnim.value}>\n        <Button label=\"Menu\" onPress={handleMenuPress} />\n      </BottomNav>\n    </Animated.View>\n  );\n});\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    marginHorizontal: metrics.screenMargin,\n  },\n  middle: {\n    flex: 1,\n    marginTop: bottomNavHeight,\n    justifyContent: \"center\",\n  },\n  title: {\n    fontSize: scale(48),\n  },\n  score: {\n    fontSize: scale(36),\n    marginTop: scale(36),\n  },\n  progress: {\n    fontSize: scale(36),\n    marginTop: scale(14),\n  },\n});\n","import React, { FC, useRef } from \"react\";\nimport { View, StyleSheet, Animated, Platform, ViewStyle } from \"react-native\";\nimport { observer } from \"mobx-react\";\nimport KeepAwake from \"op-native/react-native-keep-awake\";\nimport { useCoreStores } from \"op-core\";\nimport { BottomNav, Button, Header, Score, Text } from \"op-common\";\nimport { Linking } from \"react-native\";\nimport { metrics, animations, colors } from \"op-design\";\nimport { useAnimation, useOnMount, scale, scaleTextToFit } from \"op-utils\";\n\nexport const Finish: FC = observer(function () {\n  const { puzzle, router } = useCoreStores();\n  const interactionsDisabledRef = useRef(false);\n\n  // Routing setup\n  const startNewGame = () => router.changeRoute(\"intro\");\n  const navigateToHome = () => router.changeRoute(\"home\");\n\n  // Animations setup\n  // https://github.com/facebook/react-native/issues/27146\n  const maxOpacity = Platform.OS === \"android\" ? 0.99 : 1;\n  const fadeInterfaceInAnimDuration = 400;\n  const fadeInterfaceInStaggerDuration = 200;\n  const fadeRootOutDuration = 200;\n  const fadeTitleAnim = useAnimation();\n  const fadeSubtilteAnim = useAnimation();\n  const fadeBottomNavAnim = useAnimation();\n  const fadeScoreAnim = useAnimation();\n  const fadeRootAnim = useAnimation(maxOpacity);\n  const fadeInterfaceIn = () =>\n    Animated.stagger(fadeInterfaceInStaggerDuration, [\n      fadeTitleAnim.setup({ duration: fadeInterfaceInAnimDuration }),\n      fadeSubtilteAnim.setup({ duration: fadeInterfaceInAnimDuration }),\n      fadeBottomNavAnim.setup({ duration: fadeInterfaceInAnimDuration }),\n      fadeScoreAnim.setup({ duration: fadeInterfaceInAnimDuration }),\n    ]);\n  const fadeRootOut = () =>\n    fadeRootAnim.setup({ duration: fadeRootOutDuration });\n\n  useOnMount(() => {\n    fadeInterfaceIn().start();\n  });\n\n  // Callback handlers\n  const handleMenuPress = () => {\n    if (interactionsDisabledRef.current) return;\n    interactionsDisabledRef.current = true;\n    fadeRootOut().start(() => {\n      navigateToHome();\n    });\n  };\n  const handleNextPuzzlePress = () => {\n    if (interactionsDisabledRef.current) return;\n    interactionsDisabledRef.current = true;\n    fadeRootOut().start(startNewGame);\n  };\n\n  const fitFontSize = scaleTextToFit(`${puzzle.prefix} ${puzzle.name}`);\n\n  const scoreStyle: ViewStyle = {\n    top: metrics.screenMargin,\n  };\n\n  return (\n    <Animated.View style={[styles.root, animations.fade(fadeRootAnim.value)]}>\n      <KeepAwake />\n      <View style={styles.middle}>\n        <Text\n          weight=\"semibold\"\n          style={[\n            styles.textCompleted,\n            animations.fade(fadeSubtilteAnim.value),\n          ]}\n        >\n          Congratulations!\n        </Text>\n        <a href=\"https://smarkets.com/careers/\" target=\"_blank\">\n          <Text\n            weight=\"semibold\"\n            style={[styles.link, animations.fade(fadeSubtilteAnim.value)]}\n          >\n            Do you want to find out about Careers at Smarkets?\n          </Text>\n        </a>\n        <Text\n          weight=\"semibold\"\n          style={[styles.textOr, animations.fade(fadeSubtilteAnim.value)]}\n        >\n          or\n        </Text>\n        <a href=\"https://github.com/smk-mops/smk-logo-puzzle\" target=\"_blank\">\n          <Text\n            weight=\"semibold\"\n            style={[styles.link, animations.fade(fadeSubtilteAnim.value)]}\n          >\n            Do you want a harder puzzle to skip an interview round?\n          </Text>\n        </a>\n      </View>\n    </Animated.View>\n  );\n});\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    marginHorizontal: metrics.screenMargin,\n  },\n  middle: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  textCompleted: {\n    fontSize: scale(36),\n    marginBottom: metrics.screenMargin,\n  },\n  textScoreValue: {\n    fontSize: scale(32),\n  },\n  textOr: {\n    fontSize: scale(20),\n  },\n  completedWrapper: {\n    flexDirection: \"row\",\n  },\n  link: {\n    alignItems: \"center\",\n    fontSize: scale(20),\n    color: colors.primary[3],\n  },\n});\n","import { createContext, useContext } from \"react\";\nimport {\n  observable,\n  action,\n  computed,\n  toJS,\n  runInAction,\n  makeObservable,\n} from \"mobx\";\nimport { rehydrateObject, persistObject, pickRandomPuzzle } from \"op-utils\";\nimport uniq from \"lodash/uniq\";\nimport puzzles from \"./puzzles.json\";\n\nexport type Route =\n  | \"home\"\n  | \"game\"\n  | \"intro\"\n  | \"tutorial\"\n  | \"finish\"\n  | \"success\"\n  | \"stats\";\nexport type PuzzleMode = \"tutorial\" | \"small\" | \"medium\" | \"large\";\n\nconst sum = (a: number, b: number) => a + b;\n\nclass RouterStore {\n  root: RootStore;\n\n  currentRoute: Route;\n  routesHistory = observable.array<Route>();\n\n  constructor(rootStore: RootStore) {\n    this.root = rootStore;\n    this.currentRoute = \"home\";\n    this.routesHistory.replace([\"home\"]);\n\n    makeObservable(this, {\n      currentRoute: observable,\n      routesHistory: observable,\n      hasLoadedHomeOnce: computed,\n      changeRoute: action,\n    });\n  }\n\n  get hasLoadedHomeOnce() {\n    return (\n      this.routesHistory.length > 1 &&\n      this.routesHistory.filter((x) => x === \"home\").length > 1\n    );\n  }\n\n  changeRoute(route: Route, puzzleMode?: PuzzleMode | \"continue\") {\n    switch (route) {\n      case \"intro\": {\n        if (puzzleMode !== \"continue\") {\n          this.root.puzzle.setNextPuzzle(puzzleMode);\n        }\n        break;\n      }\n      case \"tutorial\": {\n        this.root.puzzle.setPuzzle(\"tutorial\", 0);\n        break;\n      }\n      case \"home\":\n      case \"game\":\n      case \"success\":\n      case \"finish\":\n      case \"stats\": {\n        break;\n      }\n      default: {\n        throw new Error(`\"RouterStore.changeRoute » Invalid route ${route}`);\n      }\n    }\n    this.currentRoute = route;\n    this.routesHistory.push(route);\n  }\n}\n\nclass PuzzleStore {\n  root: RootStore;\n\n  mode?: PuzzleMode = undefined;\n  index?: number = undefined;\n  increasesScore: boolean = false;\n\n  constructor(rootStore: RootStore) {\n    this.root = rootStore;\n    this.increasesScore = false;\n\n    makeObservable(this, {\n      mode: observable,\n      index: observable,\n      increasesScore: observable,\n      current: computed,\n      name: computed,\n      prefix: computed,\n      id: computed,\n      data: computed,\n      type: computed,\n      score: computed,\n      isTutorialEnd: computed,\n      tutorialTitle: computed,\n      tutorialMessage: computed,\n      setPuzzle: action,\n      setRandomPuzzle: action,\n      setNextPuzzle: action,\n      nextPuzzle: action,\n      onPuzzleCompleted: action,\n      reset: action,\n    });\n  }\n\n  get current() {\n    if (this.mode && this.index !== undefined) {\n      return puzzles[this.mode][this.index];\n    } else {\n      return undefined;\n    }\n  }\n\n  get name() {\n    return this.current?.name || \"\";\n  }\n\n  get prefix() {\n    const modePrefix = {\n      tutorial: \"xs\",\n      small: \"1st\",\n      medium: \"2nd\",\n      large: \"3rd\",\n    };\n    return this.mode ? modePrefix[this.mode] : \"ko\";\n  }\n\n  get id() {\n    return this.name;\n  }\n\n  get data() {\n    return this.current?.data;\n  }\n\n  get type() {\n    // @ts-ignore\n    return this.current?.type || \"puzzle\";\n  }\n\n  get score() {\n    return this.current?.score || 0;\n  }\n\n  /* ===================\n   * TUTORIAL\n   * =================== */\n  get isTutorialEnd() {\n    return (\n      this.mode === \"tutorial\" && this.index === puzzles.tutorial.length - 1\n    );\n  }\n\n  get tutorialTitle() {\n    // @ts-ignore\n    return this.current?.title || \"\";\n  }\n\n  get tutorialMessage() {\n    // @ts-ignore\n    return this.current?.message || \"\";\n  }\n\n  /* ===================\n   * GENERIC ACTIONS\n   * =================== */\n  setPuzzle(mode: PuzzleMode = this.mode || \"small\", index: number) {\n    this.mode = mode;\n    this.index = index;\n    this.root.stats.updatePlayedPuzzles(mode, index);\n    this.increasesScore =\n      this.root.stats.completedPuzzles[this.mode]?.indexOf(this.index) === -1;\n  }\n\n  setRandomPuzzle(mode: PuzzleMode = this.mode || \"small\") {\n    const randomPuzzleIndex = pickRandomPuzzle({\n      allPuzzlesLength: puzzles[mode].length,\n      playedHistory: this.root.stats.playedPuzzles[mode],\n      completedHistory: this.root.stats.completedPuzzles[mode],\n    });\n    this.setPuzzle(mode, randomPuzzleIndex);\n  }\n\n  setNextPuzzle(mode: PuzzleMode = this.mode || \"tutorial\") {\n    const nextMode = {\n      tutorial: \"small\",\n      small: \"medium\",\n      medium: \"large\",\n      large: \"finish\",\n    };\n    mode = nextMode[mode] as PuzzleMode;\n    const randomPuzzleIndex = pickRandomPuzzle({\n      allPuzzlesLength: puzzles[mode].length,\n      playedHistory: this.root.stats.playedPuzzles[mode],\n      completedHistory: this.root.stats.completedPuzzles[mode],\n    });\n    this.setPuzzle(mode, randomPuzzleIndex);\n  }\n\n  nextPuzzle() {\n    if (this.index !== undefined) this.index = this.index + 1;\n  }\n\n  onPuzzleCompleted() {\n    this.root.stats.updateCompletedPuzzles(this.mode, this.index);\n  }\n\n  reset() {\n    this.mode = undefined;\n    this.index = undefined;\n  }\n}\n\nconst emptyPuzzleHistory: Record<PuzzleMode, number[]> = {\n  tutorial: [],\n  small: [],\n  medium: [],\n  large: [],\n};\n\nclass StatsStore {\n  root: RootStore;\n\n  initialized: boolean;\n  playedPuzzles: Record<PuzzleMode, number[]>;\n  completedPuzzles: Record<PuzzleMode, number[]>;\n\n  constructor(rootStore: RootStore) {\n    this.root = rootStore;\n    this.initialized = false;\n    this.playedPuzzles = emptyPuzzleHistory;\n    this.completedPuzzles = emptyPuzzleHistory;\n\n    makeObservable(this, {\n      initialized: observable,\n      playedPuzzles: observable,\n      completedPuzzles: observable,\n      initializeStore: action,\n      score: computed,\n      tutorialCompleted: computed,\n      updateCompletedPuzzles: action,\n      updatePlayedPuzzles: action,\n    });\n  }\n\n  async initializeStore() {\n    const playedPuzzles = await rehydrateObject(\"playedPuzzles\");\n    runInAction(() => {\n      this.playedPuzzles = playedPuzzles || emptyPuzzleHistory;\n    });\n    const completedPuzzles = await rehydrateObject(\"completedPuzzles\");\n    runInAction(() => {\n      this.completedPuzzles = completedPuzzles || emptyPuzzleHistory;\n    });\n    runInAction(() => {\n      this.initialized = true;\n    });\n  }\n\n  get score() {\n    const _score = (Object.keys(this.completedPuzzles) as PuzzleMode[])\n      .map((mode) => {\n        return this.completedPuzzles[mode]\n          .map((index) => {\n            const puzzleScore = puzzles[mode]?.[index]?.score || 0;\n            return puzzleScore;\n          })\n          .reduce(sum, 0);\n      })\n      .reduce(sum, 0);\n\n    return _score;\n  }\n\n  get tutorialCompleted() {\n    return this.completedPuzzles[\"tutorial\"].length > 0;\n  }\n\n  updateCompletedPuzzles(mode?: PuzzleMode, index?: number) {\n    if (mode && index !== undefined) {\n      this.completedPuzzles[mode] = uniq(\n        this.completedPuzzles[mode] || []\n      ).filter((x) => x !== index);\n      this.completedPuzzles[mode].push(index);\n      persistObject(\"completedPuzzles\", toJS(this.completedPuzzles));\n    }\n  }\n\n  updatePlayedPuzzles(mode?: PuzzleMode, index?: number) {\n    if (mode && index !== undefined) {\n      this.playedPuzzles[mode] = uniq(this.playedPuzzles[mode] || []).filter(\n        (x) => x !== index\n      );\n      this.playedPuzzles[mode].push(index);\n      persistObject(\"playedPuzzles\", toJS(this.playedPuzzles));\n    }\n  }\n}\n\nclass RootStore {\n  puzzle: PuzzleStore;\n  router: RouterStore;\n  stats: StatsStore;\n\n  constructor() {\n    this.puzzle = new PuzzleStore(this);\n    this.router = new RouterStore(this);\n    this.stats = new StatsStore(this);\n  }\n\n  async initializeStore() {\n    await rootStore.stats.initializeStore();\n  }\n}\n\nconst rootStore = new RootStore();\n\nexport const storesContext = createContext({\n  initializeStore: rootStore.initializeStore,\n  puzzle: rootStore.puzzle,\n  router: rootStore.router,\n  stats: rootStore.stats,\n});\n\nexport const useCoreStores = () => useContext(storesContext);\n","import React, { FC } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Home } from \"op-home/Home\";\nimport { Game } from \"op-game/Game\";\nimport { Intro } from \"op-intro/Intro\";\nimport { Tutorial } from \"op-tutorial/Tutorial\";\nimport { Message } from \"op-message/Message\";\nimport { Success } from \"op-success/Success\";\nimport { Stats } from \"op-stats/Stats\";\nimport { Finish } from \"op-finish/Finish\";\nimport { useCoreStores } from \"./store\";\n\nexport const Router: FC = observer(function () {\n  const { puzzle, router } = useCoreStores();\n  if (router.currentRoute === \"home\") {\n    return <Home />;\n  } else if (router.currentRoute === \"intro\") {\n    return <Intro />;\n  } else if (router.currentRoute === \"game\") {\n    return <Game />;\n  } else if (router.currentRoute === \"success\") {\n    return <Success />;\n  } else if (router.currentRoute === \"stats\") {\n    return <Stats />;\n  } else if (router.currentRoute === \"finish\") {\n    return <Finish />;\n  } else if (router.currentRoute === \"tutorial\") {\n    if (puzzle.type === \"message\") {\n      return <Message />;\n    } else {\n      return <Tutorial key={puzzle.id} />;\n    }\n  } else {\n    throw new Error(`Invalid route: ${router.currentRoute}`);\n  }\n});\n","export default __webpack_public_path__ + \"static/media/smarkets-logo.33cf24e1.svg\";","import React, { FC } from \"react\";\nimport { StyleSheet, Platform, Animated, View } from \"react-native\";\nimport logo from \"./smarkets-logo.svg\";\nimport { animations, metrics } from \"op-design\";\nimport { useOnMount, useAnimation, scale } from \"op-utils\";\n\n// Centers the layout horizontally on the web, clamping it to \"webMaxLayoutWidth\"\nexport const Layout: FC = function ({ children }) {\n  const fadeInterfaceAnim = useAnimation();\n  const fadeInterfaceInAnimDuration = 400;\n  const fadeInterfaceIn = () =>\n    fadeInterfaceAnim.setup({ duration: fadeInterfaceInAnimDuration });\n  useOnMount(() => {\n    fadeInterfaceIn().start();\n  });\n  return Platform.select({\n    native: <>{children}</>,\n    default: (\n      <Animated.View\n        style={[styles.root, animations.fadeSlideTop(fadeInterfaceAnim.value)]}\n      >\n        <View style={styles.img}>\n          <img src={logo} height={48} />\n        </View>\n        <>{children}</>\n      </Animated.View>\n    ),\n  });\n};\n\nconst styles = StyleSheet.create({\n  img: {\n    alignSelf: \"flex-start\",\n    marginTop: scale(48),\n    marginBottom: scale(16),\n    marginHorizontal: metrics.screenMargin,\n  },\n  root: {\n    height: \"100%\",\n    width: \"100%\",\n    maxWidth: metrics.webMaxLayoutWidth,\n    alignSelf: \"center\",\n    flex: 1,\n  },\n});\n","import React, { FC, useState } from \"react\";\nimport { StyleSheet, SafeAreaView } from \"react-native\";\nimport { useColors } from \"op-design\";\nimport { Splash } from \"op-splash\";\nimport { skipSplashScreen } from \"op-config\";\nimport { Router } from \"./Router\";\nimport { Layout } from \"./Layout\";\n\nexport const Main: FC = function () {\n  const colors = useColors();\n  const [isShowingSplash, setIsShowingSplash] = useState(!skipSplashScreen);\n  const hideSplash = () => {\n    setIsShowingSplash(false);\n  };\n\n  if (isShowingSplash) return <Splash onHide={hideSplash} />;\n\n  return (\n    <SafeAreaView style={[styles.root, { backgroundColor: colors.primary[9] }]}>\n      <Layout>\n        <Router />\n      </Layout>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  root: {\n    height: \"100%\",\n    width: \"100%\",\n    flex: 1,\n  },\n});\n","import React, { FC } from \"react\";\nimport { StatusBar, Platform, UIManager } from \"react-native\";\nimport RNBootSplash from \"op-native/react-native-bootsplash\";\nimport { Immersive } from \"op-native/react-native-immersive\";\nimport { configure } from \"mobx\";\nimport { enableLogging } from \"mobx-logger\";\nimport { useOnMount, clearStorage, initializeAudio } from \"op-utils\";\nimport { simulateFirstLoad, enableMobxLogging } from \"op-config\";\nimport { Main } from \"./Main\";\nimport { useCoreStores } from \"./store\";\n\nconfigure({\n  enforceActions: \"always\",\n});\n\nif (enableMobxLogging) {\n  enableLogging({});\n}\n\nif (Platform.OS === \"android\") {\n  Immersive.on();\n  Immersive.setImmersive(true);\n  Immersive.addImmersiveListener(() => Immersive.on());\n  if (UIManager.setLayoutAnimationEnabledExperimental) {\n    UIManager.setLayoutAnimationEnabledExperimental(true);\n  }\n}\n\nexport const App: FC = function () {\n  const { initializeStore } = useCoreStores();\n  const initializeApp = async () => {\n    if (simulateFirstLoad) {\n      await clearStorage();\n    }\n    await initializeStore();\n    initializeAudio();\n    if (Platform.OS === \"android\" || Platform.OS === \"ios\") {\n      RNBootSplash.hide();\n    }\n  };\n  useOnMount(() => {\n    initializeApp();\n  });\n  return (\n    <>\n      <Main />\n    </>\n  );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { AppRegistry } from \"react-native\";\nimport { App } from \"op-core\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport logo from \"./op-core/smarkets-logo.svg\";\n\nAppRegistry.registerComponent(\"OrdinaryPuzzles\", () => App);\n\n// Load the app only when all the fonts are loaded\nPromise.all([\n  // @ts-ignore\n  document.fonts.ready,\n]).then((f) => {\n  AppRegistry.runApplication(\"OrdinaryPuzzles\", {\n    rootTag: document.getElementById(\"root\"),\n  });\n});\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n"],"sourceRoot":""}